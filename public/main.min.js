(()=>{"use strict";const t=["height","open","fill","inputEnabled","Backspace","clientWidth","loop","bind","ArrowRight","min","prefix"," ~{}=<>^abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ()[]-.,_:;#+'*/&%$§!?€1234567890\"","appendChild","addEventListener","fillRect","style","push","reformat","newline","clear","tabIndex","hideOutput","setPrefix","Escape","none","px monospace","disableLineWrapping","fillStyle","Terminal Version 1.0","parentNode","read","setCursor","#99d0f7","setBuffer","getContext","getMaxBufferWidth","slice","canvas","init","font","write","(c) 2020 luckydye. All rights reserved.","innerHTML","removeEventListener","\n            :host {\n                display: block;\n                width: 100%;\n                height: 100%;\n            }\n            canvas {\n                filter: contrast(1.1) blur(.33px);\n                outline: none;\n            }\n        ","gyro-terminal","textAlign","textBaseline","createElement","width","shadowRoot","join","splice","handleSubmit","cancelInput","max","connectedCallback","now","Enter","key","measureText","shadowColor","submit","value","indexOf","getCursorPosition","stopPropagation","pushToHistory","top","draw","drawCursor","unshift","append","keydown","wheel","End","ArrowUp","handleInput","split","replaceInput","resize","attachShadow","enableInput","dispatchEvent","enableLineWrapping","shadowBlur","length","drawBuffer"];var e,n;e=t,n=386,function(t){for(;--t;)e.push(e.shift())}(++n);const s=function(e,n){return t[e-=291]},i=s,o=[32,32],r=[1,0],a=i(377),c=i(356);let l,h,u=!0,p=7.69,d=[i(373),i(298),""],f=[],w=[d[d[i(343)]-1].length,d[i(343)]-1],m=[0,0],g="",x=!0,y=!1,b=[],v=-1;class C extends Event{constructor(t){super("submit"),this.value=t}}class E extends Event{constructor(t){const e=i;super("shortcut"),this[e(316)]=t}}class M extends HTMLElement{get[i(366)](){return y}set[i(366)](t){y=t}get[i(348)](){return x}set[i(348)](t){x=t}get prefix(){return g}set[i(355)](t){g=t}get cursor(){return w}constructor(){const t=i;super(),l=document[t(305)]("canvas"),l[t(365)]=0,h=l[t(291)]("2d"),window[t(358)](t(337),(e=>{this[t(362)]()})),window[t(358)](t(331),(e=>{const n=t,s=Math.sign(e.deltaY),i=o[1]+12*w[1]+3*w[1],r=Math[n(312)](0,i-(l[n(345)]-45));m[1]=Math.max(0,Math[n(354)](r,m[1]+15*s))})),window.addEventListener(t(330),(e=>{this[t(334)](e)})),this[t(338)]({mode:t(346)})}[i(291)](){return h}[i(295)](){const t=i,e=document[t(305)](t(360));e[t(299)]=t(301),this[t(307)][t(357)](e),this[t(307)].appendChild(l),this[t(351)]()}[i(313)](){const t=i;!l[t(374)]&&this[t(295)](),this.reformat()}[i(329)](t,e){const n=i,s=d[n(293)](0,t);s.push(e),s[n(361)](...d[n(293)](t)),w[1]>=t&&w[1]++,this.setBuffer(s)}[i(378)](t){d=t}[i(364)](){d=[""],this[i(376)](0,0)}[i(376)](t,e){w[0]=null!=t?t:w[0],w[1]=null!=e?e:w[1]}[i(367)](t=""){this[i(355)]=t}disableInput(){this.inputEnabled=!1}[i(339)](){this[i(348)]=!0}[i(371)](){u=!1}[i(341)](){u=!0}handleSubmit(t){const e=i;y?(t=f.join(""),y=!1):t=t[e(293)](this[e(355)][e(343)]),this[e(324)](t),this[e(340)](new C(t))}pushToHistory(t){""!=t&&b[i(328)](t),v=-1}[i(311)](){d[w[1]]=this.prefix,this.setCursor(d[w[1]].length)}replaceInput(t){const e=i;this.cancelInput(),this[e(297)](t)}[i(375)](t){return new Promise((e=>{const n=s,i=d[d[n(343)]-1];this[n(348)]=!0,this[n(355)]=t||i,t&&i!==t&&this.write(t);const o=t=>{const s=n;e(t[s(320)]),this[s(300)](s(319),o)};this[n(358)](n(319),o)}))}[i(363)](){const t=i,e=d[d[t(343)]-1];return d.push(""),w[0]=""[t(343)],w[1]++,e}[i(297)](t){const e=i;switch(t){case"\0":break;case"\r":const n=this.newline();this[e(310)](n);break;case"\n":this[e(363)]();break;default:const s=h[e(317)]("M");p=s.width;const i=d[w[1]].split("")[e(293)](0,w[0]);y?(f[e(361)](t),i[e(361)](...new Array(t.length)[e(347)]("*"))):i[e(361)](t);const o=d[w[1]][e(335)]("")[e(293)](w[0]);i[e(361)](...o),d[w[1]]=i[e(308)](""),w[0]+=t[e(343)]}const n=o[1]+12*w[1]+3*w[1];m[1]=Math[e(312)](0,n-(l[e(345)]-45))}[i(334)](t){const e=i;let n=t[e(316)];t.shiftKey;const s=t.ctrlKey;if(x){if(n==e(315)&&this.write("\r"),n==e(333)&&(v=Math.min(v+1,b[e(343)]-1),b[v]&&this[e(336)](b[v])),"ArrowDown"==n&&(v=Math[e(312)](v-1,0),b[v]&&this[e(336)](b[v])),"ArrowLeft"==n&&(w[0]=Math.max(w[0]-1,Math.max(g[e(343)],0))),n==e(353)&&(w[0]=Math[e(354)](w[0]+1,d[d[e(343)]-1][e(343)])),n==e(368)&&this[e(311)](),n==e(332)&&(w[0]=d[d[e(343)]-1].length),"Home"==n&&(w[0]=Math[e(312)](g[e(343)],0)),n==e(349)&&w[0]>0&&w[0]>g[e(343)]){const t=d[d[e(343)]-1].split("").slice(0,w[0]-1),n=d[d[e(343)]-1].split("").slice(w[0]);t.push(...n),d[d.length-1]=t[e(308)](""),w[0]--}if("Delete"==n){const t=d[d[e(343)]-1][e(335)]("").slice(0,w[0]),n=d[d[e(343)]-1][e(335)]("").slice(w[0]+1);t.push(...n),d[d[e(343)]-1]=t[e(308)]("")}-1!=c[e(321)](n)&&!s&&this.write(n)}s&&(t.preventDefault(),t[e(323)](),this[e(340)](new E(n)),-1!=c[e(321)](n)&&this[e(340)](new C("^"+n)))}[i(362)](){const t=i;l[t(306)]=this[t(350)],l[t(345)]=this.clientHeight}[i(326)](t){const e=i;t.clearRect(0,0,t[e(294)][e(306)],t[e(294)][e(345)]),t[e(296)]="300 13"+e(370),t[e(303)]="left",t[e(304)]=e(325),t.shadowColor=a,t.shadowBlur=12,t.fillStyle=a,this[e(344)](),this.inputEnabled&&this[e(327)](),t[e(318)]=e(369),t[e(342)]=0}[i(327)](){const t=i;if(Date[t(314)]()/500%2>1){const e=this.getCursorPosition();h[t(372)]=a,h[t(359)](e[0],e[1],6,16)}}[i(292)](){return l[i(306)]-2*o[0]}[i(322)](){const t=i,e=this[t(292)]();let n=0;for(let s=0;s<w[1];s++){const i=d[s];if(e-h[t(317)](i)[t(306)]<0&&u){const t=T(i,e/p);for(let e of t)n++}else n++}const s=o[0]+w[0]*p,a=o[1]+12*n+3*n+6-8-m[1];return[s+r[0],a+r[1]]}drawBuffer(){const t=i,e=this.getMaxBufferWidth();let n=o[0],s=o[1];const r=t=>{h.fillText(t,n,s),s+=15-m[1]};for(let n of d)if(e-h[t(317)](n).width<0&&u){const t=T(n,e/p);for(let e of t)r(e)}else r(n)}[i(351)](){const t=i;this[t(326)](h),requestAnimationFrame(this[t(351)][t(352)](this))}}function T(t,e){const n=i,s=[];for(t=t.split("");t[n(343)]>e;){const i=t[n(309)](0,e);s[n(361)](i[n(308)](""))}return s.push(t[n(308)]("")),s}customElements.define(i(302),M);const k=["username","data","write","cursor","wss","origin","onmessage","http","simulateWrite","split","gyro-terminal","connectToWebSocket","append","parse","print","sleep","left","type","getSocket","text","disableInput","onopen","length"];var I,S;I=k,S=464,function(t){for(;--t;)I.push(I.shift())}(++S);const L=function(t,e){return k[t-=140]},P=L,B=document.createElement(P(146));let W;class A{static[P(147)](t=(()=>{})){const e=P;return W=new WebSocket(location[e(141)].replace("https",e(140)).replace(e(143),"ws")),W[e(157)]=e=>{this.print("\nConnection established."),t()},W[e(142)]=t=>{const n=e,s=JSON[n(149)](t[n(160)]);if("message"==s[n(153)]){const t=s.data[n(159)]+": "+s[n(160)][n(155)];B.append(B[n(162)][1],t)}if(s.type==n(152)){const t=s[n(160)].username+" left the room.";B[n(148)](B[n(162)][1],t)}},W}static[P(154)](){return W}static getTerminal(){return B}static async[P(144)](t,e=24){return new Promise((n=>{const s=L;B[s(156)]();let i=0;const o=setInterval((()=>{const e=s,r=t[i];B[e(161)](r),i++,i==t[e(158)]&&(clearInterval(o),n())}),e)}))}static[P(150)](t){const e=P,n=t[e(145)]("\n");for(let t of n)B[e(161)](t),B.write("\n")}static[P(151)](t){return new Promise((e=>{setTimeout((()=>e()),t)}))}}const O=["getContext","print","setPrefix","cos","Username: ","send","newline","now","keys","shortcut","Commands: ","simulateWrite","disableInput","prefix","toLocaleLowerCase","fillStyle","fillRect","join","leave","getSocket","getTerminal","stringify","read"];var H,D;H=O,D=444,function(t){for(;--t;)H.push(H.shift())}(++D);const N=function(t,e){return O[t-=348]},R={help(t){A[N(365)]("\nNo help needed :)\n")},prefix(t){const e=N,n=A.getTerminal();A.print(n[e(354)])},clear(t){A.getTerminal().clear()},async run(t){console.log(t)},list(){const t=N;A[t(365)](t(351)+Object[t(349)](this)[t(358)](", "))},test:t=>new Promise((t=>{const e=N,n=A.getTerminal();let s=!0;n[e(353)](),n.addEventListener(e(350),(e=>{"c"==e.key.toLocaleLowerCase()&&(s=!1,t())}));let i=0,o=0;const r=()=>{const t=e,a=n[t(364)](),c=performance[t(348)]()/100;i+=20*Math.sin(c),o+=5*Math[t(367)](c+c),a[t(356)]="red",a[t(357)](400+i,100+o,48,48),s&&requestAnimationFrame(r)};r()})),async chat(t){const e=N,n=A[e(360)](),s=t[0];if(""==s||!s)return void A[e(365)]("Please provide a chat id to connect to");const i=A[e(361)]();i.setPrefix(""),i.disableInput(),await A[e(352)]("Connecting to chat...",10),i.newline(),i[e(370)]();const o=await i.read(e(368));for(i[e(370)]();;){const t=await i[e(363)]("> ");if(""!=t&&(n[e(369)](JSON[e(362)]({type:"chat",data:{username:escape(o),room:s,message:t}})),"^c"==t[e(355)]()))return n[e(369)](JSON[e(362)]({type:e(359),data:{username:escape(o),room:s}})),1}},exit:t=>new Promise((t=>{const e=N,n=A[e(361)]();n[e(366)](""),n[e(353)](),n.clear(),A[e(365)]("Bye."),setTimeout((()=>window.close()),1e3)}))},j=["Starting up","print","terminal@52.59.209.57:~$ ","addEventListener","\n[Internal Error]: ","\n\n@@@@@@            .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@ \n@@@@@@@@,               /@@@.                        @@@(            \n@@@@  @@@@#             /@@@.                        @@@(            \n@@@@    @@@@@@@@@       /@@@.     @@@@@@@@@@@&       @@@(            \n@@@@      @@@@@         /@@@.                        @@@(            \n(@@@        %           /@@@.                        @@@(            \n  .@                    /@@@.     @@@@@@@@@@@@@      @@@@@@@@@@@@@@@/\n\n","read","items","connectToWebSocket","split","slice",'" not found.\n',"\0\0\0\0","simulateWrite","\nProcess exited.\n","Connecting to Interface\0.\0.\0.","clipboardData","catch","sleep","message","getTerminal","write","disableInput","appendChild"];var J,K;J=j,K=474,function(t){for(;--t;)J.push(J.shift())}(++K);const q=function(t,e){return j[t-=419]},F=q(430),U=q(427);let z=null;const V=A[q(421)]();V[q(423)](),mainEle[q(424)](V),setTimeout((async()=>{const t=q,e=A[t(421)]();async function n(n){const s=t;if(""!=n[0])if(R[n[0]]){z=!1;const t=await R[n[0]](n[s(435)](1),A);0!==t&&null!=t&&A[s(426)](s(439)),e[s(431)](U),z=!0}else A[s(426)]('\nCommand "'+n[0]+s(436))}await A[t(426)](F),await A[t(419)](200),await A[t(438)](t(425),12),await A[t(438)]("... ",250),await A[t(426)]("[OK]"),await A[t(419)](200),await A[t(438)](t(440),24),await A[t(438)](t(437),12),A[t(433)]((async()=>{const s=t;for(A[s(426)]("");;){const t=(await e.read(U))[s(434)](" ");await n(t)[s(442)]((t=>{const e=s;console.error(t),A.print(e(429)+t[e(420)]+"\n")}))}})),window[t(428)]("paste",(n=>{const s=t;n[s(441)][s(432)][0].getAsString((t=>{e[s(422)](t)}))}))}),200)})();