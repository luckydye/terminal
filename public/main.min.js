(()=>{"use strict";const t=["shadowBlur","init","bind","ArrowRight","canvas","measureText","connectedCallback","write","px monospace","newline","shadowRoot","draw","indexOf","push","removeEventListener","none","attachShadow","deltaY","getContext","append","prefix","preventDefault","fillRect","innerHTML","dispatchEvent","define","min","cancelInput","inputEnabled","max","wheel","getMaxBufferWidth","pushToHistory","splice","now","addEventListener","slice","(c) 2020 luckydye. All rights reserved.","gyro-terminal","Enter","hideOutput","clear","reformat","drawCursor","drawBuffer","shadowColor","parentNode","enableInput","join","loop","replaceInput","cursor","disableInput","\n            :host {\n                display: block;\n                width: 100%;\n                height: 100%;\n            }\n            canvas {\n                filter: contrast(1.1) blur(.33px);\n                outline: none;\n            }\n        ","getCursorPosition","submit","ArrowDown","clearRect","font","#99d0f7","appendChild","length","setCursor","ArrowUp","height","split","createElement","tabIndex"," ~{}=<>^abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ()[]-.,_:;#+'*/&%$§!?€1234567890\"","Delete","shortcut","Escape","open","handleSubmit","fillStyle","value","stopPropagation","textBaseline","clientWidth","clientHeight","Backspace","key","setPrefix","shiftKey","End","width","handleInput","fillText","setBuffer"];var e,n;e=t,n=195,function(t){for(;--t;)e.push(e.shift())}(++n);const s=function(e,n){return t[e-=258]},i=s,o=[32,32],a=[1,0],r=i(300),c=i(309);let l,h,u=!0,d=7.69,f=["Terminal Version 1.0",i(278),""],p=[],m=[f[f.length-1][i(302)],f.length-1],w=[0,0],g="",M=!0,b=!1,v=[],x=-1;class y extends Event{constructor(t){const e=i;super("submit"),this[e(316)]=t}}class E extends Event{constructor(t){const e=i;super(e(311)),this[e(322)]=t}}class C extends HTMLElement{get[i(281)](){return b}set[i(281)](t){b=t}get[i(269)](){return M}set inputEnabled(t){M=t}get[i(261)](){return g}set[i(261)](t){g=t}get[i(292)](){return m}constructor(){const t=i;super(),l=document[t(307)](t(334)),l[t(308)]=0,h=l.getContext("2d"),window[t(276)]("resize",(e=>{this[t(283)]()})),window[t(276)](t(271),(e=>{const n=t,s=Math.sign(e[n(258)]),i=this[n(295)]()[1],o=Math[n(270)](0,i-(l[n(305)]-45));w[1]=Math[n(270)](0,Math[n(267)](o,w[1]+15*s))})),window.addEventListener("keydown",(e=>{this[t(327)](e)})),this[t(346)]({mode:t(313)})}[i(259)](){return h}[i(331)](){const t=i,e=document[t(307)]("style");e[t(264)]=t(294),this[t(340)][t(301)](e),this.shadowRoot.appendChild(l),this[t(290)]()}[i(336)](){const t=i;!l[t(287)]&&this[t(331)](),this[t(283)]()}[i(260)](t,e){const n=i,s=f[n(277)](0,t);s[n(343)](e),s[n(343)](...f[n(277)](t)),m[1]>=t&&m[1]++,this[n(329)](s)}setBuffer(t){f=t}[i(282)](){f=[""],this[i(303)](0,0)}[i(303)](t,e){m[0]=null!=t?t:m[0],m[1]=null!=e?e:m[1]}[i(323)](t=""){this.prefix=t}[i(293)](){this[i(269)]=!1}[i(288)](){this[i(269)]=!0}disableLineWrapping(){u=!1}enableLineWrapping(){u=!0}[i(314)](t){const e=i;b?(t=p.join(""),b=!1):t=t.slice(this.prefix[e(302)]),this[e(273)](t),this[e(265)](new y(t))}pushToHistory(t){""!=t&&v.unshift(t),x=-1}cancelInput(){const t=i;f[m[1]]=this[t(261)],this[t(303)](f[m[1]][t(302)])}[i(291)](t){const e=i;this[e(268)](),this[e(337)](t)}read(t){return new Promise((e=>{const n=s,i=f[f.length-1];this[n(269)]=!0,this.prefix=t||i,t&&i!==t&&this[n(337)](t);const o=t=>{const s=n;e(t[s(316)]),this[s(344)](s(296),o)};this.addEventListener("submit",o)}))}newline(){const t=i,e=f[f[t(302)]-1];return f[t(343)](""),m[0]="".length,m[1]++,e}write(t){const e=i;switch(t){case"\0":break;case"\r":const n=this.newline();this[e(314)](n);break;case"\n":this[e(339)]();break;default:const s=h[e(335)]("M");d=s[e(326)];const i=f[m[1]][e(306)]("")[e(277)](0,m[0]);b?(p[e(343)](t),i.push(...new Array(t[e(302)]).fill("*"))):i[e(343)](t);const o=f[m[1]][e(306)]("")[e(277)](m[0]);i.push(...o),f[m[1]]=i[e(289)](""),m[0]+=t.length}const n=this[e(295)]()[1];w[1]=Math[e(270)](0,n-(l[e(305)]-45))}[i(327)](t){const e=i;let n=t[e(322)];t[e(324)];const s=t.ctrlKey;if(M){if(n==e(280)&&this[e(337)]("\r"),n==e(304)&&(x=Math.min(x+1,v[e(302)]-1),v[x]&&this.replaceInput(v[x])),n==e(297)&&(x=Math[e(270)](x-1,0),v[x]&&this.replaceInput(v[x])),"ArrowLeft"==n&&(m[0]=Math[e(270)](m[0]-1,Math[e(270)](g[e(302)],0))),n==e(333)&&(m[0]=Math.min(m[0]+1,f[f[e(302)]-1].length)),n==e(312)&&this[e(268)](),n==e(325)&&(m[0]=f[f[e(302)]-1][e(302)]),"Home"==n&&(m[0]=Math[e(270)](g[e(302)],0)),n==e(321)&&m[0]>0&&m[0]>g[e(302)]){const t=f[f[e(302)]-1][e(306)]("").slice(0,m[0]-1),n=f[f[e(302)]-1][e(306)]("")[e(277)](m[0]);t[e(343)](...n),f[f[e(302)]-1]=t[e(289)](""),m[0]--}if(n==e(310)){const t=f[f[e(302)]-1][e(306)]("")[e(277)](0,m[0]),n=f[f[e(302)]-1][e(306)]("").slice(m[0]+1);t[e(343)](...n),f[f[e(302)]-1]=t[e(289)]("")}-1!=c[e(342)](n)&&!s&&this[e(337)](n)}if(s){const s=new E(n);!this.dispatchEvent(s)&&(t[e(262)](),t[e(317)](),-1!=c.indexOf(n)&&this[e(265)](new y("^"+n)))}}[i(283)](){const t=i;l.width=this[t(319)],l.height=this[t(320)];const e=this[t(295)]()[1];w[1]=Math[t(270)](0,e-(l[t(305)]-45))}[i(341)](t){const e=i;t[e(298)](0,0,t[e(334)].width,t[e(334)][e(305)]),t[e(299)]="300 13"+e(338),t.textAlign="left",t[e(318)]="top",t.shadowColor=r,t[e(330)]=12,t[e(315)]=r,this[e(285)](),this[e(269)]&&this[e(284)](),t[e(286)]=e(345),t.shadowBlur=0}[i(284)](){const t=i;if(Date[t(275)]()/500%2>1){const e=this[t(295)]();h[t(315)]=r,h[t(263)](e[0],e[1]-w[1],6,16)}}[i(272)](){return l[i(326)]-2*o[0]}[i(295)](){const t=i,e=this[t(272)]();let n=0;for(let s=0;s<m[1];s++){const i=f[s];if(e-h[t(335)](i)[t(326)]<0&&u){const t=I(i,e/d);for(let e of t)n++}else n++}return[o[0]+m[0]*d+a[0],o[1]+12*n+3*n+6-8+a[1]]}[i(285)](){const t=i,e=this.getMaxBufferWidth();let n=o[0],a=o[1]-w[1];const r=t=>{h[s(328)](t,n,a),a+=15};for(let n of f)if(e-h.measureText(n)[t(326)]<0&&u){const t=I(n,e/d);for(let e of t)r(e)}else r(n)}[i(290)](){const t=i;this[t(341)](h),requestAnimationFrame(this[t(290)][t(332)](this))}}function I(t,e){const n=i,s=[];for(t=t[n(306)]("");t[n(302)]>e;){const i=t[n(274)](0,e);s.push(i[n(289)](""))}return s[n(343)](t[n(289)]("")),s}customElements[i(266)](i(279),C);const T=["append","origin","split","simulateWrite","fetchModule","cursor","http","left","install","message","getSocket","[Module] Installed module '","wss","getTerminal","disableInput","moduleName","data","onopen","parse","then","run","username","replace","sleep","connectToWebSocket","data:application/javascript;base64,","type","print","write","getModules","installModule","onmessage","commandName","length","text"];var k,L;k=T,L=278,function(t){for(;--t;)k.push(k.shift())}(++L);const P=function(t,e){return T[t-=190]},W=P,A=new C;let B,S=new Map;class j{static[W(221)](){return S}static async[W(196)](t){const e=W,n=await fetch(t)[e(211)]((t=>t[e(191)]())),s=e(217)+btoa(n),i=await fetchModule(s);return i.origin=t,i}static async[W(222)](t){const e=W;try{if(!t[e(200)])throw new Error("Missing install method in module: "+path);{const n=t[e(207)]||t[e(193)];S.set(n,t),t.install(j),j[e(219)](e(203)+n+"'"),t[e(224)]&&(O[t.commandName]=t[e(212)])}}catch(t){j[e(219)]("[Error] "+t[e(201)])}}static[W(216)](t=(()=>{})){const e=W;return B=new WebSocket(location.origin[e(214)]("https",e(204))[e(214)](e(198),"ws")),B[e(209)]=e=>{t()},B[e(223)]=t=>{const n=e,s=JSON[n(210)](t[n(208)]);if(s[n(218)]==n(201)){const t=s.data[n(213)]+": "+s[n(208)][n(191)];A[n(192)](A[n(197)][1],t)}if(s[n(218)]==n(199)){const t=s[n(208)][n(213)]+" left the room.";A[n(192)](A.cursor[1],t)}},B}static[W(202)](){return B}static[W(205)](){return A}static async[W(195)](t,e=24){return new Promise((n=>{const s=P;A[s(206)]();let i=0;const o=setInterval((()=>{const e=s,a=t[i];A.write(a),i++,i==t[e(190)]&&(clearInterval(o),n())}),e)}))}static[W(219)](t){const e=W,n=t[e(194)]("\n");for(let t of n)A.write(t),A[e(220)]("\n")}static[W(215)](t){return new Promise((e=>{setTimeout((()=>e()),t)}))}}const N=["close","catch","\nCommands: \n","setPrefix","message","join","[Error] ","print","getModules","installModule","Provide a module path.","keys","getTerminal","clear","fetchModule","disableInput"];var D,H;D=N,H=457,function(t){for(;--t;)D.push(D.shift())}(++H);const R=function(t,e){return N[t-=125]},O={modules(){const t=R;for(let[e,n]of j[t(140)]())j[t(139)](e)},async install([t]){const e=R;if(t){const n=await j[e(130)](t)[e(133)]((t=>{const n=e;j[n(139)](n(138)+t[n(136)])}));await j[e(125)](n)}else j.print(e(126))},clear(t){const e=R;j[e(128)]()[e(129)]()},help(){const t=R;j[t(139)](t(134)+Object[t(127)](this)[t(137)](", ")+"\n")},exit:t=>new Promise((t=>{const e=R,n=j[e(128)]();n[e(135)](""),n[e(131)](),n[e(129)](),j[e(139)]("Bye."),setTimeout((()=>window[e(132)]()),1e3)}))};var q,z,F=["install","run","ConsoleModule"];q=F,z=412,function(t){for(;--t;)q.push(q.shift())}(++z);var K=function(t,e){return F[t-=439]};class J{static[K(441)](){}static[K(439)](t){}}window[K(440)]=J;const U=["toLocaleLowerCase","shortcut","getTerminal","test","now","fillStyle","test-module","cos","sin","moduleName","red","install","getContext","commandName","key","run","fillRect"];var V,Y;V=U,Y=200,function(t){for(;--t;)V.push(V.shift())}(++Y);const $=function(t,e){return U[t-=248]},G=$;let Q;class X extends ConsoleModule{static get[G(261)](){return G(258)}static get[G(248)](){return G(255)}static[G(263)](t){Q=t}static[G(250)](t){return new Promise((t=>{const e=$,n=Q[e(254)]();let s=!0;n.disableInput(),n.addEventListener(e(253),(n=>{const i=e;"c"==n[i(249)][i(252)]()&&(s=!1,t())}));let i=0,o=0;const a=()=>{const t=e,r=n[t(264)](),c=performance[t(256)]()/100;i+=20*Math[t(260)](c),o+=5*Math[t(259)](c+c),r[t(257)]=t(262),r[t(251)](400+i,100+o,48,48),s&&requestAnimationFrame(a)};a()}))}}const Z=["sleep","slice","reload","write","split","installModule",'" not found.\n',"simulateWrite","message","\n\n@@@@@@            .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@ \n@@@@@@@@,               /@@@.                        @@@(            \n@@@@  @@@@#             /@@@.                        @@@(            \n@@@@    @@@@@@@@@       /@@@.     @@@@@@@@@@@&       @@@(            \n@@@@      @@@@@         /@@@.                        @@@(            \n(@@@        %           /@@@.                        @@@(            \n  .@                    /@@@.     @@@@@@@@@@@@@      @@@@@@@@@@@@@@@/\n\n","string","addEventListener","\nProcess exited.\n","\n[Internal Error]: ","getAsString","items","catch","print","/statc/lib/minimal-module.js","fetchModule","Connecting to Interface...","Connection established.","key","shortcut","getTerminal","paste","terminal@52.59.209.57:~$ ","read","clipboardData","connectToWebSocket"];var _,tt;_=Z,tt=336,function(t){for(;--t;)_.push(_.shift())}(++tt);const et=function(t,e){return Z[t-=400]},nt=et(403),st=et(420),it=[et(412),"/statc/lib/chat-module.js",X];let ot=null;const at=j[et(418)]();at.disableInput(),mainEle.appendChild(at),setTimeout((async()=>{const t=et,e=j[t(418)]();await j[t(411)](nt),await j[t(424)](100),await j[t(401)]("Initializing",4),await j.simulateWrite("...\n\n",64);for(let e of it){let n=e;typeof n===t(404)&&(n=await j[t(413)](e)[t(410)]((e=>{j[t(411)]("[Error] "+e.message)}))),await j[t(429)](n)}async function n(n){const s=t;if(""!=n[0])if(O[n[0]]){ot=!1;const t=await O[n[0]](n[s(425)](1));0!==t&&null!=t&&j[s(411)](s(406)),e[s(421)](st),ot=!0}else j[s(411)]('\nCommand "'+n[0]+s(400))}j[t(411)](""),await j[t(424)](100),await j[t(411)](t(414),4),j[t(423)]((async()=>{const s=t;for(j[s(411)](s(415)),j[s(411)](""),await j[s(424)](100);;){const t=(await e[s(421)](st))[s(428)](" ");await n(t)[s(410)]((t=>{const e=s;console.error(t),j[e(411)](e(407)+t[e(402)]+"\n")}))}})),e.addEventListener(t(417),(e=>{const n=t;"r"==e[n(416)]?location[n(426)]():"v"==e[n(416)]&&e.preventDefault()})),window[t(405)](t(419),(n=>{const s=t;n[s(422)][s(409)][0][s(408)]((t=>{e[s(427)](t)}))}))}),200)})();