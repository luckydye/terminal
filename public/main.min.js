(()=>{"use strict";const t=["join","ArrowDown","height","write","enableInput","innerHTML","measureText","submit","Backspace","setBuffer","getCursorPosition","min","getContext","Escape","textAlign","fill","fillText","enableLineWrapping","key","value","top","drawBuffer","appendChild","ArrowLeft","#99d0f7","init","bind","addEventListener","max","deltaY","clearRect","stopPropagation","wheel","split","now","ArrowUp","getMaxBufferWidth","setPrefix","newline","Delete","disableInput","createElement","textBaseline","shortcut","indexOf","keydown","ArrowRight","tabIndex","reformat","inputEnabled","clientHeight","pushToHistory","Home","gyro-terminal","read","slice","dispatchEvent","resize","loop","canvas","sign","shadowColor","clientWidth","handleSubmit","shiftKey","length","setCursor","style","hideOutput","drawCursor","unshift","prefix","width","none","replaceInput","push","handleInput","shadowBlur","cursor","Enter","draw","shadowRoot","fillStyle"];var e,n;e=t,n=138,function(t){for(;--t;)e.push(e.shift())}(++n);const s=function(e,n){return t[e-=105]},i=s,o=[32,32],a=[1,0],r=i(157),c=" ~{}=<>^abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ()[]-.,_:;#+'*/&%$§!?€1234567890\"";let l,h,u=!0,d=7.69,f=["Terminal Version 1.0","(c) 2020 luckydye. All rights reserved.",""],p=[],m=[f[f[i(115)]-1][i(115)],f[i(115)]-1],w=[0,0],g="",v=!0,M=!1,b=[],x=-1;class y extends Event{constructor(t){const e=i;super(e(140)),this[e(152)]=t}}class E extends Event{constructor(t){const e=i;super(e(176)),this[e(151)]=t}}class C extends HTMLElement{get[i(118)](){return M}set[i(118)](t){M=t}get[i(182)](){return v}set[i(182)](t){v=t}get[i(121)](){return g}set prefix(t){g=t}get[i(128)](){return m}constructor(){const t=i;super(),l=document[t(174)]("canvas"),l[t(180)]=0,h=l[t(145)]("2d"),window[t(160)](t(107),(t=>{this.reformat()})),window.addEventListener(t(165),(e=>{const n=t,s=Math[n(110)](e[n(162)]),i=this[n(143)]()[1],o=Math[n(161)](0,i-(l[n(135)]-45));w[1]=Math[n(161)](0,Math.min(o,w[1]+15*s))})),window.addEventListener(t(178),(t=>{this.handleInput(t)})),this.attachShadow({mode:"open"})}[i(145)](){return h}[i(158)](){const t=i,e=document[t(174)](t(117));e[t(138)]="\n            :host {\n                display: block;\n                width: 100%;\n                height: 100%;\n            }\n            canvas {\n                filter: contrast(1.1) blur(.33px);\n                outline: none;\n            }\n        ",this[t(131)][t(155)](e),this.shadowRoot[t(155)](l),this[t(108)]()}connectedCallback(){const t=i;!l.parentNode&&this[t(158)](),this[t(181)]()}append(t,e){const n=i,s=f.slice(0,t);s[n(125)](e),s[n(125)](...f[n(105)](t)),m[1]>=t&&m[1]++,this[n(142)](s)}setBuffer(t){f=t}clear(){f=[""],this.setCursor(0,0)}[i(116)](t,e){m[0]=null!=t?t:m[0],m[1]=null!=e?e:m[1]}[i(170)](t=""){this[i(121)]=t}[i(173)](){this[i(182)]=!1}[i(137)](){this[i(182)]=!0}disableLineWrapping(){u=!1}[i(150)](){u=!0}[i(113)](t){const e=i;M?(t=p[e(133)](""),M=!1):t=t[e(105)](this.prefix[e(115)]),this[e(184)](t),this.dispatchEvent(new y(t))}[i(184)](t){""!=t&&b[i(120)](t),x=-1}cancelInput(){const t=i;f[m[1]]=this.prefix,this[t(116)](f[m[1]][t(115)])}[i(124)](t){this.cancelInput(),this.write(t)}[i(187)](t){return new Promise((e=>{const n=s,i=f[f.length-1];this[n(182)]=!0,this[n(121)]=t||i,t&&i!==t&&this[n(136)](t);const o=t=>{const s=n;e(t[s(152)]),this.removeEventListener(s(140),o)};this.addEventListener("submit",o)}))}newline(){const t=i,e=f[f[t(115)]-1];return f.push(""),m[0]=""[t(115)],m[1]++,e}[i(136)](t){const e=i;switch(t){case"\0":break;case"\r":const n=this[e(171)]();this[e(113)](n);break;case"\n":this[e(171)]();break;default:const s=h[e(139)]("M");d=s[e(122)];const i=f[m[1]][e(166)]("").slice(0,m[0]);M?(p[e(125)](t),i[e(125)](...new Array(t[e(115)])[e(148)]("*"))):i.push(t);const o=f[m[1]][e(166)]("")[e(105)](m[0]);i[e(125)](...o),f[m[1]]=i[e(133)](""),m[0]+=t.length}const n=this[e(143)]()[1];w[1]=Math[e(161)](0,n-(l[e(135)]-45))}[i(126)](t){const e=i;let n=t[e(151)];t[e(114)];const s=t.ctrlKey;if(v){if(n==e(129)&&this.write("\r"),n==e(168)&&(x=Math.min(x+1,b[e(115)]-1),b[x]&&this[e(124)](b[x])),n==e(134)&&(x=Math[e(161)](x-1,0),b[x]&&this[e(124)](b[x])),n==e(156)&&(m[0]=Math.max(m[0]-1,Math[e(161)](g[e(115)],0))),n==e(179)&&(m[0]=Math[e(144)](m[0]+1,f[f.length-1][e(115)])),n==e(146)&&this.cancelInput(),"End"==n&&(m[0]=f[f[e(115)]-1].length),n==e(185)&&(m[0]=Math[e(161)](g.length,0)),n==e(141)&&m[0]>0&&m[0]>g[e(115)]){const t=f[f[e(115)]-1].split("")[e(105)](0,m[0]-1),n=f[f.length-1].split("")[e(105)](m[0]);t[e(125)](...n),f[f[e(115)]-1]=t[e(133)](""),m[0]--}if(n==e(172)){const t=f[f[e(115)]-1].split("")[e(105)](0,m[0]),n=f[f[e(115)]-1][e(166)]("")[e(105)](m[0]+1);t[e(125)](...n),f[f[e(115)]-1]=t[e(133)]("")}-1!=c[e(177)](n)&&!s&&this[e(136)](n)}if(s){const s=new E(n);!this[e(106)](s)&&(t.preventDefault(),t[e(164)](),-1!=c[e(177)](n)&&this.dispatchEvent(new y("^"+n)))}}[i(181)](){const t=i;l[t(122)]=this[t(112)],l[t(135)]=this[t(183)]}[i(130)](t){const e=i;t[e(163)](0,0,t[e(109)][e(122)],t.canvas[e(135)]),t.font="300 13px monospace",t[e(147)]="left",t[e(175)]=e(153),t[e(111)]=r,t[e(127)]=12,t[e(132)]=r,this[e(154)](),this[e(182)]&&this[e(119)](),t.shadowColor=e(123),t.shadowBlur=0}[i(119)](){const t=i;if(Date[t(167)]()/500%2>1){const e=this[t(143)]();h[t(132)]=r,h.fillRect(e[0],e[1]-w[1],6,16)}}[i(169)](){return l[i(122)]-2*o[0]}[i(143)](){const t=this[i(169)]();let e=0;for(let n=0;n<m[1];n++){const s=f[n];if(t-h.measureText(s).width<0&&u){const n=I(s,t/d);for(let t of n)e++}else e++}return[o[0]+m[0]*d+a[0],o[1]+12*e+3*e+6-8+a[1]]}[i(154)](){const t=i,e=this[t(169)]();let n=o[0],s=o[1]-w[1];const a=e=>{h[t(149)](e,n,s),s+=15};for(let n of f)if(e-h[t(139)](n)[t(122)]<0&&u){const t=I(n,e/d);for(let e of t)a(e)}else a(n)}[i(108)](){const t=i;this.draw(h),requestAnimationFrame(this[t(108)][t(159)](this))}}function I(t,e){const n=i,s=[];for(t=t[n(166)]("");t[n(115)]>e;){const i=t.splice(0,e);s[n(125)](i[n(133)](""))}return s[n(125)](t[n(133)]("")),s}customElements.define(i(186),C);const T=["set","getTerminal","disableInput","parse","run","username","onopen","getModules","simulateWrite"," left the room.","write","[Error] ","connectToWebSocket","text","then","replace","http","moduleName","message","installModule","install","append","[Module] Installed module '","type","data","left","fetchModule","split","print","onmessage","origin","length","commandName","cursor","https"];var k,L;k=T,L=416,function(t){for(;--t;)k.push(k.shift())}(++L);const P=function(t,e){return T[t-=243]},S=P,A=new C;let W,B=new Map;class j{static[S(254)](){return B}static async[S(273)](t){const e=S,n=await fetch(t)[e(261)]((t=>t.text())),s="data:application/javascript;base64,"+btoa(n),i=await fetchModule(s);return i[e(277)]=t,i}static async[S(266)](t){const e=S;try{if(!t[e(267)])throw new Error("Missing install method in module: "+path);{const n=t[e(264)]||t[e(277)];B[e(247)](n,t),t.install(j),j[e(275)](e(269)+n+"'"),t[e(244)]&&(O[t[e(244)]]=t[e(251)])}}catch(t){j[e(275)](e(258)+t.message)}}static[S(259)](t=(()=>{})){const e=S;return W=new WebSocket(location[e(277)][e(262)](e(246),"wss").replace(e(263),"ws")),W[e(253)]=e=>{t()},W[e(276)]=t=>{const n=e,s=JSON[n(250)](t[n(271)]);if(s[n(270)]==n(265)){const t=s[n(271)][n(252)]+": "+s[n(271)][n(260)];A[n(268)](A[n(245)][1],t)}if(s[n(270)]==n(272)){const t=s[n(271)][n(252)]+n(256);A[n(268)](A.cursor[1],t)}},W}static getSocket(){return W}static[S(248)](){return A}static async[S(255)](t,e=24){return new Promise((n=>{const s=P;A[s(249)]();let i=0;const o=setInterval((()=>{const e=s,a=t[i];A[e(257)](a),i++,i==t[e(243)]&&(clearInterval(o),n())}),e)}))}static[S(275)](t){const e=S,n=t[e(274)]("\n");for(let t of n)A.write(t),A[e(257)]("\n")}static sleep(t){return new Promise((e=>{setTimeout((()=>e()),t)}))}}const D=["Provide a module path.","getTerminal","catch","print","[Error] ","\nCommands: \n","keys","Bye.","clear","fetchModule","getModules","join"];var N,R;N=D,R=440,function(t){for(;--t;)N.push(N.shift())}(++R);const H=function(t,e){return D[t-=302]},O={modules(){const t=H;for(let[e,n]of j[t(304)]())j.print(e)},async install([t]){const e=H;if(t){const n=await j[e(303)](t)[e(308)]((t=>{const n=e;j.print(n(310)+t.message)}));await j.installModule(n)}else j[e(309)](e(306))},clear(t){const e=H;j[e(307)]()[e(302)]()},help(){const t=H;j.print(t(311)+Object[t(312)](this)[t(305)](", ")+"\n")},exit:t=>new Promise((t=>{const e=H,n=j.getTerminal();n.setPrefix(""),n.disableInput(),n[e(302)](),j[e(309)](e(313)),setTimeout((()=>window.close()),1e3)}))};var K,q,F=["run","ConsoleModule","install"];K=F,q=310,function(t){for(;--t;)K.push(K.shift())}(++q);var z=function(t,e){return F[t-=257]};class J{static[z(258)](){}static[z(259)](t){}}window[z(257)]=J;const U=["commandName","now","key","test","getContext","moduleName","fillStyle","install","disableInput","sin","cos","run","fillRect","addEventListener","getTerminal"];var V,Y;V=U,Y=427,function(t){for(;--t;)V.push(V.shift())}(++Y);const $=function(t,e){return U[t-=210]},G=$;let Q;class X extends ConsoleModule{static get[G(223)](){return"test-module"}static get[G(218)](){return G(221)}static[G(210)](t){Q=t}static[G(214)](t){return new Promise((t=>{const e=$,n=Q[e(217)]();let s=!0;n[e(211)](),n[e(216)]("shortcut",(n=>{"c"==n[e(220)].toLocaleLowerCase()&&(s=!1,t())}));let i=0,o=0;const a=()=>{const t=e,r=n[t(222)](),c=performance[t(219)]()/100;i+=20*Math[t(212)](c),o+=5*Math[t(213)](c+c),r[t(224)]="red",r[t(215)](400+i,100+o,48,48),s&&requestAnimationFrame(a)};a()}))}}const Z=["simulateWrite","Connecting to Interface\0.\0.\0.","\n\n@@@@@@            .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@ \n@@@@@@@@,               /@@@.                        @@@(            \n@@@@  @@@@#             /@@@.                        @@@(            \n@@@@    @@@@@@@@@       /@@@.     @@@@@@@@@@@&       @@@(            \n@@@@      @@@@@         /@@@.                        @@@(            \n(@@@        %           /@@@.                        @@@(            \n  .@                    /@@@.     @@@@@@@@@@@@@      @@@@@@@@@@@@@@@/\n\n","getTerminal","preventDefault","addEventListener","Starting up","disableInput","terminal@52.59.209.57:~$ ","string","slice","clipboardData",'" not found.\n',"read","[Error] ","[OK]\n","split","/statc/lib/minimal-module.js","getAsString","sleep","print",'\nCommand "',"error","... ","fetchModule","\nProcess exited.\n","connectToWebSocket","shortcut","\n[Internal Error]: ","\0\0\0\0","message","key","items","/statc/lib/chat-module.js","catch"];var _,tt;_=Z,tt=216,function(t){for(;--t;)_.push(_.shift())}(++tt);const et=function(t,e){return Z[t-=442]},nt=et(473),st=et(444),it=[et(453),et(469),X];let ot=null;const at=j[et(474)]();at[et(443)](),mainEle.appendChild(at),setTimeout((async()=>{const t=et,e=j[t(474)]();await j[t(456)](nt),await j.sleep(200),await j[t(471)](t(442),12),await j.simulateWrite(t(459),250),j.print(t(451));for(let e of it){let n=e;typeof n===t(445)&&(n=await j[t(460)](e)[t(470)]((e=>{const n=t;j[n(456)](n(450)+e[n(466)])}))),await j.installModule(n)}async function n(n){const s=t;if(""!=n[0])if(O[n[0]]){ot=!1;const t=await O[n[0]](n[s(446)](1));0!==t&&null!=t&&j[s(456)](s(461)),e[s(449)](st),ot=!0}else j[s(456)](s(457)+n[0]+s(448))}j[t(456)](""),await j[t(455)](200),await j[t(471)](t(472),24),await j[t(471)](t(465),12),j[t(462)]((async()=>{const s=t;for(j[s(456)]("\nConnection established."),j[s(456)](""),await j.sleep(200);;){const t=(await e.read(st))[s(452)](" ");await n(t)[s(470)]((t=>{const e=s;console[e(458)](t),j[e(456)](e(464)+t[e(466)]+"\n")}))}})),e[t(476)](t(463),(e=>{const n=t;"r"==e[n(467)]?location.reload():"v"==e[n(467)]&&e[n(475)]()})),window[t(476)]("paste",(n=>{const s=t;n[s(447)][s(468)][0][s(454)]((t=>{e.write(t)}))}))}),200)})();