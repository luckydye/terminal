(()=>{"use strict";const t=["(c) 2020 luckydye. All rights reserved.","removeEventListener","attachShadow","tabIndex","loop","wheel","key","init","cancelInput","submit","#99d0f7","getCursorPosition","splice","ctrlKey","join","define","draw","min","fillStyle","indexOf","split","textAlign","fillText","_defaultPrevented","open","defaultPrevented","gyro-terminal","Home","shadowBlur","Delete","value","shortcut","keydown","addEventListener","setCursor","getMaxBufferWidth","enableLineWrapping","write","sign","Backspace","canvas","clear","dispatchEvent","length","createElement","shadowRoot","Escape","enableInput","ArrowDown","Enter","slice","deltaY","unshift","append","height","replaceInput","ArrowLeft","shiftKey","cursor","reformat","width","resize","left","stopPropagation","fillRect","clientWidth","now","textBaseline","setBuffer","handleSubmit","bind","End","Terminal Version 1.0","clientHeight","max","pushToHistory","prefix","clearRect","inputEnabled","appendChild","shadowColor"," ~{}=<>^abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ()[]-.,_:;#+'*/&%$§!?€1234567890\"","measureText","parentNode","preventDefault","handleInput","push","hideOutput","read","setPrefix","disableInput","newline"];var e,n;e=t,n=320,function(t){for(;--t;)e.push(e.shift())}(++n);const s=function(e,n){return t[e-=461]},o=s,i=[32,32],a=[1,0],r=o(519),l=o(498);let c,u,h=!0,d=7.69,f=[o(489),o(509),""],p=[],m=[f[f.length-1][o(552)],f[o(552)]-1],w=[0,0],g="",M=!0,v=!1,b=[],y=-1;class x extends Event{constructor(t){const e=o;super(e(518)),this[e(539)]=t}}class E extends Event{get[o(534)](){return this[o(532)]}set[o(534)](t){this[o(532)]=t}constructor(t){const e=o;super(e(540)),this[e(515)]=t,this[e(532)]=!1}}class I extends HTMLElement{get[o(504)](){return v}set[o(504)](t){v=t}get[o(495)](){return M}set[o(495)](t){M=t}get[o(493)](){return g}set[o(493)](t){g=t}get[o(475)](){return m}constructor(){const t=o;super(),c=document[t(461)](t(549)),c[t(512)]=0,u=c.getContext("2d"),window[t(542)](t(478),(t=>{this.reformat()})),window[t(542)](t(514),(e=>{const n=t,s=Math[n(547)](e[n(468)]),o=this[n(520)]()[1],i=Math[n(491)](0,o-(c[n(471)]-45));w[1]=Math[n(491)](0,Math.min(i,w[1]+15*s))})),window.addEventListener(t(541),(e=>{this[t(502)](e)})),this[t(511)]({mode:t(533)})}getContext(){return u}[o(516)](){const t=o,e=document[t(461)]("style");e.innerHTML="\n            :host {\n                display: block;\n                width: 100%;\n                height: 100%;\n            }\n            canvas {\n                filter: contrast(1.1) blur(.33px);\n                outline: none;\n            }\n        ",this[t(462)][t(496)](e),this[t(462)][t(496)](c),this[t(513)]()}connectedCallback(){const t=o;!c[t(500)]&&this[t(516)](),this.reformat()}[o(470)](t,e){const n=o,s=f[n(467)](0,t);s[n(503)](e),s[n(503)](...f[n(467)](t)),m[1]>=t&&m[1]++,this[n(485)](s)}[o(485)](t){f=t}[o(550)](){f=[""],this[o(543)](0,0)}[o(543)](t,e){m[0]=null!=t?t:m[0],m[1]=null!=e?e:m[1]}[o(506)](t=""){this[o(493)]=t}[o(507)](){this.inputEnabled=!1}[o(464)](){this[o(495)]=!0}disableLineWrapping(){h=!1}[o(545)](){h=!0}[o(486)](t){const e=o;v?(t=p.join(""),v=!1):t=t.slice(this[e(493)].length),this[e(492)](t),this[e(551)](new x(t))}pushToHistory(t){""!=t&&b[o(469)](t),y=-1}[o(517)](){const t=o;f[m[1]]=this[t(493)],this[t(543)](f[m[1]][t(552)])}replaceInput(t){const e=o;this[e(517)](),this[e(546)](t)}[o(505)](t){return new Promise((e=>{const n=s,o=f[f.length-1];this.inputEnabled=!0,this[n(493)]=t||o,t&&o!==t&&this[n(546)](t);const i=t=>{const s=n;e(t[s(539)]),this[s(510)](s(518),i)};this[n(542)](n(518),i)}))}[o(508)](){const t=o,e=f[f[t(552)]-1];return f[t(503)](""),m[0]=""[t(552)],m[1]++,e}[o(546)](t){const e=o;switch(t){case"\0":break;case"\r":const n=this[e(508)]();this[e(486)](n);break;case"\n":this[e(508)]();break;default:const s=f[m[1]][e(529)]("")[e(467)](0,m[0]);v?(p[e(503)](t),s[e(503)](...new Array(t.length).fill("*"))):s[e(503)](t);const o=f[m[1]][e(529)]("")[e(467)](m[0]);s[e(503)](...o),f[m[1]]=s[e(523)](""),m[0]+=t[e(552)]}const n=this[e(520)]()[1];w[1]=Math[e(491)](0,n-(c.height-45))}[o(502)](t){const e=o;let n=t[e(515)];t[e(474)];const s=t[e(522)];if(M){if(n==e(466)&&this.write("\r"),"ArrowUp"==n&&(y=Math.min(y+1,b[e(552)]-1),b[y]&&this[e(472)](b[y])),n==e(465)&&(y=Math[e(491)](y-1,0),b[y]&&this.replaceInput(b[y])),n==e(473)&&(m[0]=Math.max(m[0]-1,Math[e(491)](g.length,0))),"ArrowRight"==n&&(m[0]=Math[e(526)](m[0]+1,f[f[e(552)]-1][e(552)])),n==e(463)&&this[e(517)](),n==e(488)&&(m[0]=f[f.length-1].length),n==e(536)&&(m[0]=Math[e(491)](g[e(552)],0)),n==e(548)&&m[0]>0&&m[0]>g[e(552)]){const t=f[f[e(552)]-1][e(529)]("")[e(467)](0,m[0]-1),n=f[f[e(552)]-1][e(529)]("")[e(467)](m[0]);t.push(...n),f[f[e(552)]-1]=t.join(""),m[0]--}if(n==e(538)){const t=f[f[e(552)]-1][e(529)]("")[e(467)](0,m[0]),n=f[f[e(552)]-1][e(529)]("")[e(467)](m[0]+1);t[e(503)](...n),f[f.length-1]=t[e(523)]("")}-1!=l[e(528)](n)&&!s&&this[e(546)](n)}if(s){const s=new E(n);this.dispatchEvent(s),t[e(501)](),t[e(480)](),!s.defaultPrevented&&-1!=l[e(528)](n)&&this.dispatchEvent(new x("^"+n))}}[o(476)](){const t=o;c[t(477)]=this[t(482)],c.height=this[t(490)];const e=this[t(520)]()[1];w[1]=Math.max(0,e-(c[t(471)]-45))}[o(525)](t){const e=o;t[e(494)](0,0,t[e(549)][e(477)],t.canvas[e(471)]),t.font="300 13px monospace",t[e(530)]=e(479),t[e(484)]="top",t[e(497)]=r,t[e(537)]=12,t.fillStyle=r,this.drawBuffer(),this.inputEnabled&&this.drawCursor(),t[e(497)]="none",t.shadowBlur=0}drawCursor(){const t=o;if(Date[t(483)]()/500%2>1){const e=this[t(520)]();u[t(527)]=r,u[t(481)](e[0],e[1]-w[1],6,16)}}[o(544)](){return c.width-2*i[0]}[o(520)](){const t=o,e=u[t(499)]("M");d=e[t(477)];const n=this.getMaxBufferWidth();let s=0;for(let e=0;e<m[1];e++){const o=f[e];if(n-u.measureText(o)[t(477)]<0&&h){const t=T(o,n/d);for(let e of t)s++}else s++}return[i[0]+m[0]*d+a[0],i[1]+12*s+3*s+6-8+a[1]]}drawBuffer(){const t=o,e=this[t(544)]();let n=i[0],s=i[1]-w[1];const a=e=>{u[t(531)](e,n,s),s+=15};for(let n of f)if(e-u[t(499)](n).width<0&&h){const t=T(n,e/d);for(let e of t)a(e)}else a(n)}loop(){const t=o;this[t(525)](u),requestAnimationFrame(this.loop[t(487)](this))}}function T(t,e){const n=o,s=[];for(t=t[n(529)]("");t[n(552)]>e;){const o=t[n(521)](0,e);s[n(503)](o[n(523)](""))}return s[n(503)](t[n(523)]("")),s}customElements[o(524)](o(535),I);const C=["[Module] Uninstalled module '","getModules","uninstall","text","getItem","commandName","install","simulateWrite","fetchModule","get","data","push","origin","sleep","disableInput","onopen","write","length","https","moduleName","http","left","replace","modules","type","parse","wss","stringify","print","Module not found.","indexOf","getTerminal","cursor","setItem","data:application/javascript;base64,","splice"," left the room.","username","installModule","getSocket","connectToWebSocket","then","run","message","set","append"];var k,P;k=C,P=289,function(t){for(;--t;)k.push(k.shift())}(++P);const S=function(t,e){return C[t-=259]},L=S,B=new I;let W,A=new Map;const N=L(269);function j(){let t=localStorage[L(296)](N);return!t&&(t='{ "modules": [] }'),JSON.parse(t)}function O(t){const e=L;localStorage[e(279)](N,JSON[e(273)](t))}class H{static async loadModules(){const t=L,e=j();for(let n of e.modules){const e=await H[t(300)](n);H[t(284)](e)}}static[L(293)](){return A}static async[L(300)](t){const e=L,n=await fetch(t)[e(287)]((t=>t[e(295)]())),s=e(280)+btoa(n),o=await fetchModule(s);o.origin=t;let i=j();return-1===i[e(269)][e(276)](o.origin)&&i[e(269)][e(303)](o[e(304)]),O(i),o}static async installModule(t){const e=L,n=t[e(265)]||t[e(304)];if(A[e(301)](n))H[e(274)]("[Module] Module '"+n+"' already installed.");else try{if(!t.install)throw new Error("Missing install method in module: "+path);A[e(290)](n,t),t[e(298)](H),H[e(274)]("[Module] Installed module '"+n+"'"),t.commandName&&(z[t[e(297)]]=t[e(288)])}catch(t){H.print("[Error] "+t[e(289)])}}static uninstallModule(t){const e=L,n=A[e(301)](t);if(n){A.delete(t),n[e(294)](),n[e(297)]&&(z[n[e(297)]]=null);let s=j();s.modules[e(281)](s[e(269)][e(276)](n[e(304)]),1),O(s),H[e(274)](e(292)+t+"'")}else H[e(274)](e(275))}static[L(286)](t=(()=>{})){const e=L;return W=new WebSocket(location.origin[e(268)](e(264),e(272)).replace(e(266),"ws")),W[e(261)]=e=>{t()},W.onmessage=t=>{const n=e,s=JSON[n(271)](t[n(302)]);if(s[n(270)]==n(289)){const t=s[n(302)][n(283)]+": "+s[n(302)][n(295)];B[n(291)](B[n(278)][1],t)}if(s[n(270)]==n(267)){const t=s.data.username+n(282);B[n(291)](B.cursor[1],t)}},W}static[L(285)](){return W}static[L(277)](){return B}static async[L(299)](t,e=24){return new Promise((n=>{const s=S;B[s(260)]();let o=0;const i=setInterval((()=>{const e=s,a=t[o];B[e(262)](a),o++,o==t[e(263)]&&(clearInterval(i),n())}),e)}))}static[L(274)](t){const e=L,n=t.split("\n");for(let t of n)B.write(t),B[e(262)]("\n")}static[L(259)](t){return new Promise((e=>{setTimeout((()=>e()),t)}))}}const D=["getTerminal","fetchModule","catch","keys","clear","Bye.","message","print","\nCommands: \n","[Error] ","disableInput","join","installModule","uninstallModule","Provide a module name.","getModules"];var R,J;R=D,J=152,function(t){for(;--t;)R.push(R.shift())}(++J);const q=function(t,e){return D[t-=277]},z={modules(){const t=q;for(let[e,n]of H[t(284)]())H.print(e)},async install([t]){const e=q;if(t){const n=await H[e(286)](t)[e(287)]((t=>{const n=e;H[n(292)](n(278)+t[n(291)])}));await H[e(281)](n)}else H[e(292)]("Provide a module path.")},async uninstall([t]){const e=q;t&&""!=t?await H[e(282)](t):H.print(e(283))},clear(t){H[q(285)]().clear()},help(){const t=q;H[t(292)](t(277)+Object[t(288)](this)[t(280)](", ")+"\n")},exit:t=>new Promise((t=>{const e=q,n=H[e(285)]();n.setPrefix(""),n[e(279)](),n[e(289)](),H[e(292)](e(290)),setTimeout((()=>window.close()),1e3)}))};var F,K,U=["run","ConsoleModule"];F=U,K=412,function(t){for(;--t;)F.push(F.shift())}(++K);var V=function(t,e){return U[t-=420]};class Y{static install(){}static uninstall(){}static[V(420)](t){}}window[V(421)]=Y;const $=["sin","run","test-module","getTerminal","fillStyle","cos","test","fillRect","getContext","disableInput","key","red","now","moduleName","toLocaleLowerCase"];var _,G;_=$,G=441,function(t){for(;--t;)_.push(_.shift())}(++G);const Q=function(t,e){return $[t-=154]},X=Q;let Z;class tt extends ConsoleModule{static get[X(161)](){return X(165)}static get commandName(){return X(154)}static install(t){Z=t}static[X(164)](t){return new Promise((t=>{const e=Q,n=Z[e(166)]();let s=!0;n[e(157)](),n.addEventListener("shortcut",(n=>{const o=e;"c"==n[o(158)][o(162)]()&&(s=!1,t())}));let o=0,i=0;const a=()=>{const t=e,r=n[t(156)](),l=performance[t(160)]()/100;o+=20*Math[t(163)](l),i+=5*Math[t(168)](l+l),r[t(167)]=t(159),r[t(155)](400+o,100+i,48,48),s&&requestAnimationFrame(a)};a()}))}}const et=["fetchModule","read","\n[Internal Error]: ","connectToWebSocket","addEventListener","defaultPrevented","then","installModule","reload","terminal@52.59.209.57:~$ ","slice","message","print","shortcut",'\nCommand "',"loadModules","disableInput","preventDefault","key","\nProcess exited.\n","Initializing...\n\n","string","\n\n@@@@@@            .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@ \n@@@@@@@@,               /@@@.                        @@@(            \n@@@@  @@@@#             /@@@.                        @@@(            \n@@@@    @@@@@@@@@       /@@@.     @@@@@@@@@@@&       @@@(            \n@@@@      @@@@@         /@@@.                        @@@(            \n(@@@        %           /@@@.                        @@@(            \n  .@                    /@@@.     @@@@@@@@@@@@@      @@@@@@@@@@@@@@@/\n\n","catch","simulateWrite","write","getTerminal",'" not found.\n',"contextmenu","split","Connecting to Interface...","/statc/lib/chat-module.js","Connection established.","clipboard","sleep"];var nt,st;nt=et,st=393,function(t){for(;--t;)nt.push(nt.shift())}(++st);const ot=function(t,e){return et[t-=340]},it=ot(354),at=ot(341),rt=["/statc/lib/minimal-module.js",ot(363),tt];let lt=null;const ct=H[ot(358)]();ct[ot(348)](),mainEle.appendChild(ct),setTimeout((async()=>{const t=ot,e=H[t(358)]();await H[t(344)](it),await H[t(366)](100),await H[t(356)](t(352),4);for(let e of rt){let n=e;typeof n===t(353)&&(n=await H[t(367)](e).catch((e=>{const n=t;H[n(344)]("[Error] "+e[n(343)])}))),await H[t(374)](n)}async function n(n){const s=t;if(""!=n[0])if(z[n[0]]){lt=!1;const t=await z[n[0]](n[s(342)](1));0!==t&&null!=t&&H[s(344)](s(351)),e[s(368)](at),lt=!0}else H[s(344)](s(346)+n[0]+s(359))}H.print(""),await H[t(347)](),H[t(344)](""),await H[t(366)](100),await H.print(t(362),4),H[t(370)]((async()=>{const s=t;for(H[s(344)](s(364)),H[s(344)](""),await H.sleep(100);;){const t=(await e[s(368)](at))[s(361)](" ");await n(t)[s(355)]((t=>{const e=s;console.error(t),H.print(e(369)+t[e(343)]+"\n")}))}})),e[t(371)](t(345),(n=>{const s=t;"r"==n[s(350)]?location[s(340)]():"v"==n[s(350)]&&(navigator[s(365)].readText()[s(373)]((t=>{e.write(t)})),n[s(372)]=!0)})),window[t(371)](t(360),(n=>{const s=t;n[s(349)](),navigator.clipboard.readText()[s(373)]((t=>{e[s(357)](t)}))}))}),200)})();