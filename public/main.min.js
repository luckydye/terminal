(()=>{"use strict";const t=["gyro-terminal","stopPropagation","innerHTML","keydown","End","disableLineWrapping","createElement","ArrowLeft","length","connectedCallback","px monospace","getCursorPosition","split","style","appendChild","setCursor","reformat","disableInput","handleInput","slice","inputEnabled","shortcut","canvas","enableInput","pushToHistory","min","fillRect","wheel","append","open","top","measureText","(c) 2020 luckydye. All rights reserved.","bind","textBaseline","font","textAlign","height","submit","prefix","write","Escape","dispatchEvent","fillText","width","loop","value","fill","addEventListener","join","fillStyle","ArrowUp","shadowRoot","Enter","indexOf","ctrlKey","sign"," ~{}=<>^abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ()[]-.,_:;#+'*/&%$§!?€1234567890\"","resize","hideOutput","replaceInput","draw","left","Terminal Version 1.0","Delete","\n            :host {\n                display: block;\n                width: 100%;\n                height: 100%;\n            }\n            canvas {\n                filter: contrast(1.1) blur(.33px);\n                outline: none;\n            }\n        ","getMaxBufferWidth","max","clientWidth","getContext","cursor","clearRect","push","handleSubmit","init","newline","setPrefix","shiftKey","key","setBuffer","shadowColor","cancelInput","none","drawBuffer","drawCursor","shadowBlur","tabIndex","parentNode","attachShadow"];var e,n;e=t,n=105,function(t){for(;--t;)e.push(e.shift())}(++n);const s=function(e,n){return t[e-=334]},o=s,i=[32,32],a=[1,0],r="#99d0f7",l=o(375);let c,u,h=!0,d=7.69,f=[o(381),o(350),""],p=[],m=[f[f[o(415)]-1][o(415)],f[o(415)]-1],w=[0,0],g="",M=!0,y=!1,b=[],x=-1;class v extends Event{constructor(t){const e=o;super(e(356)),this[e(364)]=t}}class E extends Event{constructor(t){const e=o;super(e(339)),this[e(396)]=t}}class C extends HTMLElement{get[o(377)](){return y}set[o(377)](t){y=t}get[o(338)](){return M}set[o(338)](t){M=t}get[o(357)](){return g}set prefix(t){g=t}get[o(388)](){return m}constructor(){const t=o;super(),c=document[t(413)](t(340)),c[t(404)]=0,u=c[t(387)]("2d"),window[t(366)](t(376),(e=>{this[t(334)]()})),window[t(366)](t(345),(e=>{const n=t,s=Math[n(374)](e.deltaY),o=this.getCursorPosition()[1],i=Math[n(385)](0,o-(c.height-45));w[1]=Math.max(0,Math[n(343)](i,w[1]+15*s))})),window.addEventListener(t(410),(e=>{this[t(336)](e)})),this[t(406)]({mode:t(347)})}getContext(){return u}[o(392)](){const t=o,e=document.createElement(t(420));e[t(409)]=t(383),this.shadowRoot[t(421)](e),this[t(370)][t(421)](c),this[t(363)]()}[o(416)](){const t=o;!c[t(405)]&&this[t(392)](),this[t(334)]()}[o(346)](t,e){const n=o,s=f[n(337)](0,t);s[n(390)](e),s[n(390)](...f.slice(t)),m[1]>=t&&m[1]++,this[n(397)](s)}[o(397)](t){f=t}clear(){f=[""],this.setCursor(0,0)}[o(422)](t,e){m[0]=null!=t?t:m[0],m[1]=null!=e?e:m[1]}[o(394)](t=""){this[o(357)]=t}[o(335)](){this[o(338)]=!1}[o(341)](){this[o(338)]=!0}[o(412)](){h=!1}enableLineWrapping(){h=!0}[o(391)](t){const e=o;y?(t=p[e(367)](""),y=!1):t=t[e(337)](this[e(357)][e(415)]),this.pushToHistory(t),this[e(360)](new v(t))}[o(342)](t){""!=t&&b.unshift(t),x=-1}[o(399)](){const t=o;f[m[1]]=this.prefix,this.setCursor(f[m[1]][t(415)])}[o(378)](t){const e=o;this[e(399)](),this[e(358)](t)}read(t){return new Promise((e=>{const n=s,o=f[f[n(415)]-1];this[n(338)]=!0,this[n(357)]=t||o,t&&o!==t&&this[n(358)](t);const i=t=>{const s=n;e(t[s(364)]),this.removeEventListener(s(356),i)};this[n(366)](n(356),i)}))}[o(393)](){const t=o,e=f[f[t(415)]-1];return f[t(390)](""),m[0]="".length,m[1]++,e}[o(358)](t){const e=o;switch(t){case"\0":break;case"\r":const n=this[e(393)]();this[e(391)](n);break;case"\n":this.newline();break;default:const s=u[e(349)]("M");d=s[e(362)];const o=f[m[1]][e(419)]("")[e(337)](0,m[0]);y?(p[e(390)](t),o[e(390)](...new Array(t[e(415)])[e(365)]("*"))):o[e(390)](t);const i=f[m[1]].split("")[e(337)](m[0]);o[e(390)](...i),f[m[1]]=o.join(""),m[0]+=t[e(415)]}const n=this[e(418)]()[1];w[1]=Math[e(385)](0,n-(c[e(355)]-45))}[o(336)](t){const e=o;let n=t.key;t[e(395)];const s=t[e(373)];if(M){if(n==e(371)&&this[e(358)]("\r"),n==e(369)&&(x=Math.min(x+1,b.length-1),b[x]&&this.replaceInput(b[x])),"ArrowDown"==n&&(x=Math[e(385)](x-1,0),b[x]&&this.replaceInput(b[x])),n==e(414)&&(m[0]=Math[e(385)](m[0]-1,Math[e(385)](g[e(415)],0))),"ArrowRight"==n&&(m[0]=Math[e(343)](m[0]+1,f[f.length-1][e(415)])),n==e(359)&&this[e(399)](),n==e(411)&&(m[0]=f[f[e(415)]-1].length),"Home"==n&&(m[0]=Math[e(385)](g[e(415)],0)),"Backspace"==n&&m[0]>0&&m[0]>g.length){const t=f[f[e(415)]-1][e(419)]("")[e(337)](0,m[0]-1),n=f[f[e(415)]-1][e(419)]("")[e(337)](m[0]);t[e(390)](...n),f[f[e(415)]-1]=t[e(367)](""),m[0]--}if(n==e(382)){const t=f[f.length-1][e(419)]("")[e(337)](0,m[0]),n=f[f.length-1].split("")[e(337)](m[0]+1);t[e(390)](...n),f[f.length-1]=t[e(367)]("")}-1!=l[e(372)](n)&&!s&&this[e(358)](n)}if(s){const s=new E(n);!this[e(360)](s)&&(t.preventDefault(),t[e(408)](),-1!=l.indexOf(n)&&this.dispatchEvent(new v("^"+n)))}}reformat(){const t=o;c[t(362)]=this[t(386)],c[t(355)]=this.clientHeight;const e=this[t(418)]()[1];w[1]=Math[t(385)](0,e-(c.height-45))}[o(379)](t){const e=o;t[e(389)](0,0,t[e(340)].width,t[e(340)][e(355)]),t[e(353)]="300 13"+e(417),t[e(354)]=e(380),t[e(352)]=e(348),t[e(398)]=r,t[e(403)]=12,t[e(368)]=r,this[e(401)](),this.inputEnabled&&this[e(402)](),t.shadowColor=e(400),t.shadowBlur=0}[o(402)](){const t=o;if(Date.now()/500%2>1){const e=this[t(418)]();u[t(368)]=r,u[t(344)](e[0],e[1]-w[1],6,16)}}[o(384)](){return c[o(362)]-2*i[0]}[o(418)](){const t=o,e=this.getMaxBufferWidth();let n=0;for(let s=0;s<m[1];s++){const o=f[s];if(e-u[t(349)](o).width<0&&h){const t=I(o,e/d);for(let e of t)n++}else n++}return[i[0]+m[0]*d+a[0],i[1]+12*n+3*n+6-8+a[1]]}[o(401)](){const t=o,e=this.getMaxBufferWidth();let n=i[0],a=i[1]-w[1];const r=t=>{u[s(361)](t,n,a),a+=15};for(let n of f)if(e-u[t(349)](n).width<0&&h){const t=I(n,e/d);for(let e of t)r(e)}else r(n)}[o(363)](){const t=o;this.draw(u),requestAnimationFrame(this[t(363)][t(351)](this))}}function I(t,e){const n=o,s=[];for(t=t[n(419)]("");t[n(415)]>e;){const o=t.splice(0,e);s.push(o[n(367)](""))}return s.push(t[n(367)]("")),s}customElements.define(o(407),C);const k=["text","cursor","Module not found.","getModules","onopen","then","commandName","stringify","replace","onmessage","[Error] ","setItem","left","split","parse","getSocket","[Module] Module '","disableInput","install","append","print","indexOf",'{ "modules": [] }',"length","installModule","simulateWrite","type","username","data","getTerminal","get","set","Missing install method in module: ","[Module] Uninstalled module '","' already installed.","modules","connectToWebSocket","message","sleep","uninstallModule","data:application/javascript;base64,","write","getItem","fetchModule","[Module] Installed module '","origin","moduleName","run"];var S,T;S=k,T=405,function(t){for(;--t;)S.push(S.shift())}(++T);const L=function(t,e){return k[t-=112]},P=L,W=new C;let A,B=new Map;const N=P(126);class O{static async loadModules(){const t=P,e=localStorage[t(133)](N);if(e){const n=JSON.parse(e);for(let e of n[t(126)]){const n=await O[t(134)](e);O[t(115)](n)}}}static[P(142)](){return B}static async[P(134)](t){const e=P,n=await fetch(t)[e(144)]((t=>t[e(139)]())),s=e(131)+btoa(n),o=await fetchModule(s);o[e(136)]=t;let i=localStorage[e(133)](N);!i&&(i=e(113));const a=JSON[e(153)](i);return-1===a.modules[e(112)](o[e(136)])&&a[e(126)].push(o[e(136)]),localStorage[e(150)](N,JSON[e(146)](a)),o}static async[P(115)](t){const e=P,n=t[e(137)]||t[e(136)];if(B[e(121)](n))O[e(159)](e(155)+n+e(125));else try{if(!t[e(157)])throw new Error(e(123)+path);B[e(122)](n,t),t.install(O),O[e(159)](e(135)+n+"'"),t[e(145)]&&(J[t.commandName]=t[e(138)])}catch(t){O[e(159)](e(149)+t[e(128)])}}static[P(130)](t){const e=P,n=B[e(121)](t);n?(B.delete(t),n.uninstall(),n[e(145)]&&(J[n[e(145)]]=null),O[e(159)](e(124)+name+"'")):O[e(159)](e(141))}static[P(127)](t=(()=>{})){const e=P;return A=new WebSocket(location[e(136)][e(147)]("https","wss")[e(147)]("http","ws")),A[e(143)]=e=>{t()},A[e(148)]=t=>{const n=e,s=JSON[n(153)](t.data);if(s[n(117)]==n(128)){const t=s[n(119)][n(118)]+": "+s[n(119)][n(139)];W[n(158)](W[n(140)][1],t)}if(s[n(117)]==n(151)){const t=s.data[n(118)]+" left the room.";W[n(158)](W[n(140)][1],t)}},A}static[P(154)](){return A}static[P(120)](){return W}static async[P(116)](t,e=24){return new Promise((n=>{const s=L;W[s(156)]();let o=0;const i=setInterval((()=>{const e=s,a=t[o];W[e(132)](a),o++,o==t[e(114)]&&(clearInterval(i),n())}),e)}))}static[P(159)](t){const e=P,n=t[e(152)]("\n");for(let t of n)W[e(132)](t),W[e(132)]("\n")}static[P(129)](t){return new Promise((e=>{setTimeout((()=>e()),t)}))}}const j=["setPrefix","print","catch","message","close","getModules","Provide a module path.","clear","disableInput","keys","join","Bye.","getTerminal"];var D,H;D=j,H=248,function(t){for(;--t;)D.push(D.shift())}(++H);const R=function(t,e){return j[t-=247]},J={modules(){const t=R;for(let[e,n]of O[t(251)]())O[t(247)](e)},async install([t]){const e=R;if(t){const n=await O.fetchModule(t)[e(248)]((t=>{const n=e;O[n(247)]("[Error] "+t[n(249)])}));await O.installModule(n)}else O.print(e(252))},clear(t){const e=R;O[e(258)]()[e(253)]()},help(){const t=R;O.print("\nCommands: \n"+Object[t(255)](this)[t(256)](", ")+"\n")},exit:t=>new Promise((t=>{const e=R,n=O[e(258)]();n[e(259)](""),n[e(254)](),n[e(253)](),O[e(247)](e(257)),setTimeout((()=>window[e(250)]()),1e3)}))};var q,z,F=["install","run","ConsoleModule","uninstall"];q=F,z=455,function(t){for(;--t;)q.push(q.shift())}(++z);var K=function(t,e){return F[t-=194]};class U{static[K(195)](){}static[K(194)](){}static[K(196)](t){}}window[K(197)]=U;const V=["now","fillStyle","key","install","disableInput","moduleName","test","red","commandName","test-module","getTerminal","fillRect"];var Y,$;Y=V,$=134,function(t){for(;--t;)Y.push(Y.shift())}(++$);const G=function(t,e){return V[t-=379]},Q=G;let X;class Z extends ConsoleModule{static get[Q(382)](){return Q(386)}static get[Q(385)](){return Q(383)}static[Q(380)](t){X=t}static run(t){return new Promise((t=>{const e=G,n=X[e(387)]();let s=!0;n[e(381)](),n.addEventListener("shortcut",(n=>{"c"==n[e(379)].toLocaleLowerCase()&&(s=!1,t())}));let o=0,i=0;const a=()=>{const t=e,r=n.getContext(),l=performance[t(389)]()/100;o+=20*Math.sin(l),i+=5*Math.cos(l+l),r[t(390)]=t(384),r[t(388)](400+o,100+i,48,48),s&&requestAnimationFrame(a)};a()}))}}const _=["sleep","/statc/lib/minimal-module.js","connectToWebSocket","catch","paste","error","message",'\nCommand "',"Connecting to Interface...","/statc/lib/chat-module.js","write","preventDefault","getTerminal","\n\n@@@@@@            .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@ \n@@@@@@@@,               /@@@.                        @@@(            \n@@@@  @@@@#             /@@@.                        @@@(            \n@@@@    @@@@@@@@@       /@@@.     @@@@@@@@@@@&       @@@(            \n@@@@      @@@@@         /@@@.                        @@@(            \n(@@@        %           /@@@.                        @@@(            \n  .@                    /@@@.     @@@@@@@@@@@@@      @@@@@@@@@@@@@@@/\n\n","split","string","key","Initializing...\n\n","disableInput","clipboardData","slice","reload","getAsString","print","simulateWrite","appendChild","[Error] ","read","addEventListener","\nProcess exited.\n"];var tt,et;tt=_,et=136,function(t){for(;--t;)tt.push(tt.shift())}(++et);const nt=function(t,e){return _[t-=194]},st=nt(221),ot="terminal@52.59.209.57:~$ ",it=[nt(209),nt(217),Z];let at=null;const rt=O[nt(220)]();rt[nt(196)](),mainEle[nt(203)](rt),setTimeout((async()=>{const t=nt,e=O[t(220)]();await O[t(201)](st),await O[t(208)](100),await O[t(202)](t(195),4);for(let e of it){let n=e;typeof n===t(223)&&(n=await O.fetchModule(e)[t(211)]((e=>{const n=t;O[n(201)](n(204)+e[n(214)])}))),await O.installModule(n)}async function n(n){const s=t;if(""!=n[0])if(J[n[0]]){at=!1;const t=await J[n[0]](n[s(198)](1));0!==t&&null!=t&&O[s(201)](s(207)),e[s(205)](ot),at=!0}else O.print(s(215)+n[0]+'" not found.\n')}O[t(201)](""),await O.loadModules(),O[t(201)](""),await O[t(208)](100),await O[t(201)](t(216),4),O[t(210)]((async()=>{const s=t;for(O[s(201)]("Connection established."),O[s(201)](""),await O[s(208)](100);;){const t=(await e.read(ot))[s(222)](" ");await n(t).catch((t=>{const e=s;console[e(213)](t),O[e(201)]("\n[Internal Error]: "+t.message+"\n")}))}})),e[t(206)]("shortcut",(e=>{const n=t;"r"==e[n(194)]?location[n(199)]():"v"==e[n(194)]&&e[n(219)]()})),window[t(206)](t(212),(n=>{const s=t;n[s(197)].items[0][s(200)]((t=>{e[s(218)](t)}))}))}),200)})();