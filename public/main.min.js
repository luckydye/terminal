(()=>{var t={384:(t,e,n)=>{t=n.nmd(t);const s=["length","assign","push","&grant_type=client_credentials&scope=","from_name","exports","from_id","Bearer ",".mp4","toFixed"," of ","&client_secret=","-offset-","twitch_client_id","&first=100","access_token","json","then","authorizing...","display_name"," is following (","&after=","POST","total","User not found","https://api.twitch.tv/helix/videos?user_id=","twitch_client_secret","https://api.twitch.tv/helix/users/follows?to_id=","log","Getting channel follower overlap of ","cursor"," and ","application/json","https://clips-media-assets2.twitch.tv/","status","to_name"," / ","pagination","data",") [","followed_at"];var o,i;o=s,i=415,function(t){for(;--t;)o.push(o.shift())}(++i);const a=function(t,e){return s[t-=262]},r=a,c=localStorage[r(270)],l=localStorage[r(283)];let u=null;function h(){const t=r;console.log(t(275));const e="https://id.twitch.tv/oauth2/token?client_id="+c+t(268)+l+t(301);return fetch(e,{method:t(279)})[t(274)]((e=>e[t(273)]())).then((t=>u=t))}async function d(t,e={}){const n=r,s=Object[n(299)]({headers:{"Content-Type":n(289),Authorization:n(264)+u[n(272)],"Client-ID":c}},e);return await fetch(t,s)[n(274)]((t=>t[n(273)]()))}async function f(t){return!u&&await h(),d("https://api.twitch.tv/helix/users?login="+t).then((t=>{const e=a;if(0==t.data[e(298)])throw new Error(e(281));return t}))}async function p(t){const e=(await f(t)).data[0],n=[];return console.log("Fethcing "+t+" followers,"),await async function t(s){const o=a,i=await async function(t){const n=a;let s=n(284)+e.id+n(271);return t&&(s+=n(278)+t),await d(s)}(s);console[o(285)](n[o(298)]+o(293)+i[o(280)]),n.push(...i.data),i[o(294)][o(287)]&&await t(i.pagination[o(287)])}(),n}t[r(262)]={getUserByLogin:f,getUserFollowers:async function(t){const e=r,n=(await f(t)).data[0],s=[];await async function t(e){const o=a,i=await async function(t){const e=a;let s="https://api.twitch.tv/helix/users/follows?from_id="+n.id+e(271);return t&&(s+=e(278)+t),await d(s)}(e);s[o(300)](...i[o(295)]),i[o(294)][o(287)]&&await t(i[o(294)][o(287)])}(),console[e(285)](n[e(276)]+e(277)+s[e(298)]+"):");for(let t of s)console[e(285)](t.followed_at+", "+t[e(292)])},getChannelViewerOverlap:async function(t,e){const n=r;console[n(285)](n(286)+t+n(288)+e);const s=await p(t),o=await p(e),i={};let a=0;for(let t of s)i[t.from_id]=0;for(let t of o)null!=i[t[n(263)]]&&(a++,i[t.from_id]=1),i[t.from_id]=0;return console[n(285)](a+n(267)+t+"("+s[n(298)]+n(296)+(a/s.length*100)[n(266)](3)+"%] are also in "+e),a/s[n(298)]*100},getStreamsByUser:async function(t){const e=r;return!u&&await h(),d("https://api.twitch.tv/helix/streams?user_login="+t)[e(274)]((async t=>t[e(295)][0]))},queryClipsByStreamId:async function(t){const e=r;let n=0;for(;n<5910;){n++;const s=e(290)+t+e(269)+n+e(265);await fetch(s).then((t=>{const n=e;console[n(285)](s,t[n(291)])}))}return t},getVODsByUser:async function(t){const e=r;!u&&await h();const n=(await f(t))[e(295)][0];return d(e(282)+n.id+"&type=archive&first=100")[e(274)]((async t=>t.data))},getChannelAllFollowers:async function(t){const e=r;console[e(285)]("Getting channel followers...");const n=await p(t);for(let t of n)console.log(t[e(297)]+", "+t[e(302)])}}}},e={};function n(s){if(e[s])return e[s].exports;var o=e[s]={id:s,loaded:!1,exports:{}};return t[s](o,o.exports,n),o.loaded=!0,o.exports}n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";const t=["attachShadow","replaceInput","prefix","font","split","px monospace","splice","drawBuffer","slice","textBaseline","loop","init","setCursor","measureText","disableLineWrapping","canvas","top","draw","Home","hideOutput","textAlign","min","setBuffer","\n            :host {\n                display: block;\n                width: 100%;\n                height: 100%;\n            }\n            canvas {\n                filter: contrast(1.1) blur(.33px);\n                outline: none;\n            }\n        ","unshift","Terminal Version 1.0","shortcut","_defaultPrevented","shadowRoot","appendChild","bind","stopPropagation","none","getMaxBufferWidth","tabIndex","clientHeight","inputEnabled","shiftKey","indexOf","getCursorPosition","fillRect","now","handleSubmit","Delete","read","width","push","clearRect","handleInput","fillText","wheel","length","submit","shadowBlur","parentNode","innerHTML","newline","value","keydown","#99d0f7","height","Backspace","join","enableInput"," ~{}=<>^abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ()[]-.,_:;#+'*/&%$§!?€1234567890\"","connectedCallback","drawCursor","write","defaultPrevented","fill","createElement","dispatchEvent","shadowColor","define","addEventListener","max","reformat","(c) 2020 luckydye. All rights reserved.","style","gyro-terminal","ArrowLeft","ArrowUp","clientWidth","ctrlKey","deltaY","fillStyle","cancelInput","clear","getContext","append","pushToHistory","enableLineWrapping","key","preventDefault"];var e,s;e=t,s=311,function(t){for(;--t;)e.push(e.shift())}(++s);const o=function(e,n){return t[e-=239]},i=o,a=[32,32],r=[1,0],c=i(269),l=i(274);let u,h,d=!0,f=7.69,p=[i(329),i(287),""],w=[],m=[p[p[i(261)]-1][i(261)],p[i(261)]-1],g=[0,0],y="",v=!0,x=!1,M=[],C=-1;class b extends Event{constructor(t){const e=i;super(e(262)),this[e(267)]=t}}class E extends Event{get[i(278)](){return this[i(331)]}set defaultPrevented(t){this._defaultPrevented=t}constructor(t){super(i(330)),this.key=t,this._defaultPrevented=!1}}class I extends HTMLElement{get[i(323)](){return x}set hideOutput(t){x=t}get[i(246)](){return v}set[i(246)](t){v=t}get prefix(){return y}set[i(306)](t){y=t}get cursor(){return m}constructor(){const t=i;super(),u=document.createElement(t(319)),u[t(244)]=0,h=u[t(298)]("2d"),window[t(284)]("resize",(e=>{this[t(286)]()})),window[t(284)](t(260),(e=>{const n=t,s=Math.sign(e[n(294)]),o=this[n(249)]()[1],i=Math[n(285)](0,o-(u[n(270)]-45));g[1]=Math[n(285)](0,Math[n(325)](i,g[1]+15*s))})),window.addEventListener(t(268),(e=>{this[t(258)](e)})),this[t(304)]({mode:"open"})}getContext(){return h}[i(315)](){const t=i,e=document[t(280)](t(288));e[t(265)]=t(327),this[t(332)][t(239)](e),this[t(332)][t(239)](u),this[t(314)]()}[i(275)](){const t=i;!u[t(264)]&&this[t(315)](),this[t(286)]()}[i(299)](t,e){const n=i,s=p[n(312)](0,t);s[n(256)](e),s.push(...p[n(312)](t)),m[1]>=t&&m[1]++,this[n(326)](s)}[i(326)](t){p=t}[i(297)](){p=[""],this.setCursor(0,0)}[i(316)](t,e){m[0]=null!=t?t:m[0],m[1]=null!=e?e:m[1]}setPrefix(t=""){this.prefix=t}disableInput(){this[i(246)]=!1}[i(273)](){this.inputEnabled=!0}[i(318)](){d=!1}[i(301)](){d=!0}[i(252)](t){const e=i;x?(t=w.join(""),x=!1):t=t[e(312)](this[e(306)][e(261)]),this.pushToHistory(t),this[e(281)](new b(t))}[i(300)](t){""!=t&&M[i(328)](t),C=-1}[i(296)](){const t=i;p[m[1]]=this[t(306)],this[t(316)](p[m[1]][t(261)])}replaceInput(t){const e=i;this.cancelInput(),this[e(277)](t)}[i(254)](t){return new Promise((e=>{const n=o,s=p[p[n(261)]-1];this[n(246)]=!0,this[n(306)]=t||s,t&&s!==t&&this[n(277)](t);const i=t=>{const s=n;e(t[s(267)]),this.removeEventListener(s(262),i)};this.addEventListener(n(262),i)}))}[i(266)](){const t=i,e=p[p[t(261)]-1];return p[t(256)](""),m[0]="".length,m[1]++,e}[i(277)](t){const e=i;switch(t){case"\0":break;case"\r":const n=this[e(266)]();this[e(252)](n);break;case"\n":this[e(266)]();break;default:const s=p[m[1]].split("")[e(312)](0,m[0]);x?(w.push(t),s[e(256)](...new Array(t[e(261)])[e(279)]("*"))):s[e(256)](t);const o=p[m[1]][e(308)]("")[e(312)](m[0]);s.push(...o),p[m[1]]=s[e(272)](""),m[0]+=t[e(261)]}const n=this[e(249)]()[1];g[1]=Math[e(285)](0,n-(u[e(270)]-45))}[i(258)](t){const e=i;let n=t[e(302)];t[e(247)];const s=t[e(293)];if(v){if("Enter"==n&&this[e(277)]("\r"),n==e(291)&&(C=Math[e(325)](C+1,M[e(261)]-1),M[C]&&this.replaceInput(M[C])),"ArrowDown"==n&&(C=Math.max(C-1,0),M[C]&&this[e(305)](M[C])),n==e(290)&&(m[0]=Math[e(285)](m[0]-1,Math.max(y[e(261)],0))),"ArrowRight"==n&&(m[0]=Math[e(325)](m[0]+1,p[p.length-1].length)),"Escape"==n&&this.cancelInput(),"End"==n&&(m[0]=p[p[e(261)]-1][e(261)]),n==e(322)&&(m[0]=Math[e(285)](y[e(261)],0)),n==e(271)&&m[0]>0&&m[0]>y[e(261)]){const t=p[p[e(261)]-1].split("")[e(312)](0,m[0]-1),n=p[p[e(261)]-1][e(308)]("")[e(312)](m[0]);t[e(256)](...n),p[p[e(261)]-1]=t[e(272)](""),m[0]--}if(n==e(253)){const t=p[p[e(261)]-1].split("")[e(312)](0,m[0]),n=p[p[e(261)]-1].split("")[e(312)](m[0]+1);t.push(...n),p[p.length-1]=t.join("")}-1!=l[e(248)](n)&&!s&&this[e(277)](n)}if(s){const s=new E(n);this[e(281)](s),t[e(303)](),t[e(241)](),!s[e(278)]&&-1!=l[e(248)](n)&&this.dispatchEvent(new b("^"+n))}}reformat(){const t=i;u.width=this[t(292)],u[t(270)]=this[t(245)];const e=this.getCursorPosition()[1];g[1]=Math[t(285)](0,e-(u[t(270)]-45))}[i(321)](t){const e=i;t[e(257)](0,0,t.canvas.width,t[e(319)].height),t[e(307)]="300 13"+e(309),t[e(324)]="left",t[e(313)]=e(320),t.shadowColor=c,t[e(263)]=12,t[e(295)]=c,this[e(311)](),this.inputEnabled&&this.drawCursor(),t[e(282)]=e(242),t[e(263)]=0}[i(276)](){const t=i;if(Date[t(251)]()/500%2>1){const e=this[t(249)]();h.fillStyle=c,h[t(250)](e[0],e[1]-g[1],6,16)}}[i(243)](){return u[i(255)]-2*a[0]}getCursorPosition(){const t=i,e=h[t(317)]("M");f=e.width;const n=this[t(243)]();let s=0;for(let e=0;e<m[1];e++){const o=p[e];if(n-h[t(317)](o)[t(255)]<0&&d){const t=_(o,n/f);for(let e of t)s++}else s++}return[a[0]+m[0]*f+r[0],a[1]+12*s+3*s+6-8+r[1]]}[i(311)](){const t=i,e=this[t(243)]();let n=a[0],s=a[1]-g[1];const o=e=>{h[t(259)](e,n,s),s+=15};for(let n of p)if(e-h[t(317)](n)[t(255)]<0&&d){const t=_(n,e/f);for(let e of t)o(e)}else o(n)}[i(314)](){const t=i;this[t(321)](h),requestAnimationFrame(this[t(314)][t(240)](this))}}function _(t,e){const n=i,s=[];for(t=t[n(308)]("");t[n(261)]>e;){const o=t[n(310)](0,e);s[n(256)](o.join(""))}return s[n(256)](t.join("")),s}customElements[i(283)](i(289),I);const P=["push","installModule","left","getSocket","getModules","write","splice","[Module] Installed module '","getItem","message","username","cursor","data","run","uninstall","then","delete","object","parse","type","connectToWebSocket","' already installed.","fetchModule","wss","install","print","commandName","[Error] ","https","modules","[Module] Uninstalled module '","set","simulateWrite","replace","get","onmessage","setItem","text","length"," left the room.","append","split","data:application/javascript;base64,","origin","disableInput","http"];var k,S;k=P,S=384,function(t){for(;--t;)k.push(k.shift())}(++S);const T=function(t,e){return P[t-=266]},L=T,O=new I;let B,N=new Map;const j=L(279);function A(){const t=L;let e=localStorage[t(304)](j);return!e&&(e='{ "modules": [] }'),JSON[t(268)](e)}function U(t){localStorage[L(286)](j,JSON.stringify(t))}class W{static async loadModules(){const t=L,e=A();for(let n of e[t(279)]){const e=await W[t(272)](n);W[t(297)](e)}}static[L(300)](){return N}static async fetchModule(t){const e=L,n=await fetch(t)[e(311)]((t=>t[e(287)]())),s=e(292)+btoa(n),o=await fetchModule(s);o[e(293)]=t;let i=A();return-1===i[e(279)].indexOf(o[e(293)])&&i[e(279)][e(296)](o[e(293)]),U(i),o}static async[L(297)](t){const e=L,n=t.moduleName||t.origin;if(N[e(284)](n))W[e(275)]("[Module] Module '"+n+e(271));else try{if(!t[e(274)])throw new Error("Missing install method in module: "+path);N[e(281)](n,t),await t[e(274)](W),W[e(275)](e(303)+n+"'"),t.commandName&&(V[t[e(276)]]=t[e(309)])}catch(t){W.print(e(277)+t[e(305)])}}static uninstallModule(t){const e=L,n=N[e(284)](t);if(n){N[e(266)](t),n[e(310)](),n.commandName&&(V[n.commandName]=null);let s=A();s[e(279)][e(302)](s[e(279)].indexOf(n.origin),1),U(s),W[e(275)](e(280)+t+"'")}else W[e(275)]("Module not found.")}static[L(270)](t=(()=>{})){const e=L;return B=new WebSocket(location.origin[e(283)](e(278),e(273))[e(283)](e(295),"ws")),B.onopen=e=>{t()},B[e(285)]=t=>{const n=e,s=JSON.parse(t[n(308)]);if("message"==s[n(269)]){const t=s.data[n(306)]+": "+s.data[n(287)];O[n(290)](O[n(307)][1],t)}if(s[n(269)]==n(298)){const t=s[n(308)].username+n(289);O[n(290)](O.cursor[1],t)}},B}static[L(299)](){return B}static getTerminal(){return O}static async[L(282)](t,e=24){return new Promise((n=>{const s=T;O[s(294)]();let o=0;const i=setInterval((()=>{const e=s,a=t[o];O[e(301)](a),o++,o==t[e(288)]&&(clearInterval(i),n())}),e)}))}static print(t){const e=L;typeof t==e(267)&&(t=JSON.stringify(t,null,"\t"));const n=t[e(291)]("\n");for(let t of n)O[e(301)](t),O[e(301)]("\n")}static sleep(t){return new Promise((e=>{setTimeout((()=>e()),t)}))}}const D=["setPrefix","clear","installModule","[Error] ","\nCommands: \n","catch","getTerminal","join","keys","Provide a module path.","disableInput","uninstallModule","print"];var F,H;F=D,H=182,function(t){for(;--t;)F.push(F.shift())}(++H);const R=function(t,e){return D[t-=443]},V={modules(){const t=R;for(let[e,n]of W.getModules())W[t(455)](e)},async install([t]){const e=R;if(t){const n=await W.fetchModule(t)[e(448)]((t=>{const n=e;W.print(n(446)+t.message)}));await W[e(445)](n)}else W.print(e(452))},async uninstall([t]){const e=R;t&&""!=t?await W[e(454)](t):W[e(455)]("Provide a module name.")},clear(t){const e=R;W[e(449)]()[e(444)]()},help(){const t=R;W.print(t(447)+Object[t(451)](this)[t(450)](", ")+"\n")},exit:t=>new Promise((t=>{const e=R,n=W[e(449)]();n[e(443)](""),n[e(453)](),n[e(444)](),W[e(455)]("Bye."),setTimeout((()=>window.close()),1e3)}))};var q,z,J=["uninstall","install","ConsoleModule","run"];q=J,z=132,function(t){for(;--t;)q.push(q.shift())}(++z);var G=function(t,e){return J[t-=459]};class K{static[G(460)](){}static[G(459)](){}static[G(462)](t){}}window[G(461)]=K;const Y=["red","sin","fillStyle","getTerminal","shortcut","key","moduleName","cos","getContext","fillRect","commandName","disableInput","install","addEventListener","test"];var $,Q;$=Y,Q=316,function(t){for(;--t;)$.push($.shift())}(++Q);const X=function(t,e){return Y[t-=145]},Z=X;let tt;class et extends ConsoleModule{static get[Z(150)](){return"test-module"}static get[Z(154)](){return Z(158)}static[Z(156)](t){tt=t}static run(t){return new Promise((t=>{const e=X,n=tt[e(147)]();let s=!0;n[e(155)](),n[e(157)](e(148),(n=>{"c"==n[e(149)].toLocaleLowerCase()&&(s=!1,t())}));let o=0,i=0;const a=()=>{const t=e,r=n[t(152)](),c=performance.now()/100;o+=20*Math[t(145)](c),i+=5*Math[t(151)](c+c),r[t(146)]=t(159),r[t(153)](400+o,100+i,48,48),s&&requestAnimationFrame(a)};a()}))}}var nt=n(384);const st=["Provide twitch login name!","keys","slice","commandName","Unknown command","twitch","Commands: ","print","run","Provide twitch login name."];var ot,it;ot=st,it=277,function(t){for(;--t;)ot.push(ot.shift())}(++it);const at=function(t,e){return st[t-=342]},rt=at,ct={async streamClips(t){const e=at;return t[0]?await(0,nt.queryClipsByStreamId)(t[0]):e(344)},async vod(t){const e=at;return t[0]?await(0,nt.getVODsByUser)(t[0]):e(344)},async stream(t){const e=at;return t[0]?await(0,nt.getStreamsByUser)(t[0]):e(344)},user:async t=>t[0]?(await(0,nt.getUserByLogin)(t[0])).data[0]:"Provide twitch login name.",following(t){const e=at;if(!t[0])return e(345);(0,nt.getUserFollowers)(t[0])},followers(t){const e=at;if(!t[0])return e(345);(0,nt.getChannelAllFollowers)(t[0])},viewership(t){const e=at;if(!t[0]||!t[1])return e(345);(0,nt.getChannelViewerOverlap)(t[0],t[1])}};let lt;class ut extends ConsoleModule{static get moduleName(){return"twitch-module"}static get[rt(348)](){return rt(350)}static install(t){lt=t}static async[rt(343)](t){const e=rt,n=t[0],s=t[e(347)](1);if(n in ct){const t=await ct[n](s);t&&lt.print(t)}else lt[e(342)](e(349)),lt[e(342)](e(351)+Object[e(346)](ct))}}const ht=["Initializing...\n\n","reload",'\nCommand "',"then","\n[Internal Error]: ","[Error] ","Loading optional modules...\n","error","getTerminal","message","\nProcess exited.\n","print","shortcut","write","installModule","readText","Connection established.","clipboard","key","split","defaultPrevented","preventDefault","terminal@52.59.209.57:~$ ","Loading native modules...\n","read","catch","sleep","fetchModule","addEventListener","simulateWrite","slice","appendChild","\n\n@@@@@@            .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@ \n@@@@@@@@,               /@@@.                        @@@(            \n@@@@  @@@@#             /@@@.                        @@@(            \n@@@@    @@@@@@@@@       /@@@.     @@@@@@@@@@@&       @@@(            \n@@@@      @@@@@         /@@@.                        @@@(            \n(@@@        %           /@@@.                        @@@(            \n  .@                    /@@@.     @@@@@@@@@@@@@      @@@@@@@@@@@@@@@/\n\n","disableInput","Connecting to Interface..."];var dt,ft;dt=ht,ft=138,function(t){for(;--t;)dt.push(dt.shift())}(++ft);const pt=function(t,e){return ht[t-=259]},wt=pt(293),mt=pt(283),gt=[et,ut];let yt=null;const vt=W.getTerminal();vt[pt(259)](),mainEle[pt(292)](vt),setTimeout((async()=>{const t=pt,e=W[t(269)]();await W[t(272)](wt),await W[t(287)](100),await W[t(290)](t(261),4),await W[t(272)](t(284));for(let e of gt){let n=e;"string"==typeof n&&(n=await W[t(288)](e)[t(286)]((e=>{const n=t;W[n(272)](n(266)+e[n(270)])}))),await W[t(275)](n)}async function n(n){const s=t;if(""!=n[0])if(V[n[0]]){yt=!1;const t=await V[n[0]](n[s(291)](1));0!==t&&null!=t&&W.print(s(271)),e.read(mt),yt=!0}else W.print(s(263)+n[0]+'" not found.\n')}W[t(272)](""),await W[t(272)](t(267)),await W.loadModules(),W.print(""),await W[t(287)](100),await W[t(272)](t(260),4),W.connectToWebSocket((async()=>{const s=t;for(W.print(s(277)),W.print(""),await W.sleep(100);;){const t=(await e[s(285)](mt))[s(280)](" ");await n(t)[s(286)]((t=>{const e=s;console[e(268)](t),W[e(272)](e(265)+t[e(270)]+"\n")}))}})),e[t(289)](t(273),(n=>{const s=t;"r"==n[s(279)]?location[s(262)]():"v"==n.key&&(navigator[s(278)][s(276)]()[s(264)]((t=>{e[s(274)](t)})),n[s(281)]=!0)})),window[t(289)]("contextmenu",(n=>{const s=t;n[s(282)](),navigator[s(278)].readText().then((t=>{e[s(274)](t)}))}))}),200)})()})();