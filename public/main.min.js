(()=>{"use strict";const t=["drawCursor","pushToHistory","bind","connectedCallback"," ~{}=<>^abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ()[]-.,_:;#+'*/&%$§!?€1234567890\"","cursor","attachShadow","canvas","slice","Escape","shadowBlur","key","parentNode","\n            :host {\n                display: block;\n                width: 100%;\n                height: 100%;\n            }\n            canvas {\n                filter: contrast(1.1) blur(.33px);\n                outline: none;\n            }\n        ","ArrowRight","End","handleSubmit","fillStyle","clientHeight","setBuffer","fillText","getContext","top","textAlign","dispatchEvent","gyro-terminal","shadowColor","tabIndex","max","min","hideOutput","enableInput","write","prefix","appendChild","#99d0f7","innerHTML","open","handleInput","getMaxBufferWidth","addEventListener","setPrefix","textBaseline","push","split","inputEnabled","unshift","style","Backspace","indexOf","draw","deltaY","shadowRoot","define","Terminal Version 1.0","now","keydown","join","ctrlKey","createElement","drawBuffer","resize","wheel","setCursor","cancelInput","Enter","shiftKey","append","length","newline","removeEventListener","replaceInput","none","ArrowUp","clearRect","init","clear","submit","height","width","reformat","sign","Delete","ArrowLeft","getCursorPosition","preventDefault","measureText","loop","value","fillRect"];var e,n;e=t,n=280,function(t){for(;--t;)e.push(e.shift())}(++n);const s=function(e,n){return t[e-=480]},o=s,i=[32,32],a=[1,0],r=o(505),l=o(564);let c,u,h=!0,d=7.69,p=[o(524),"(c) 2020 luckydye. All rights reserved.",""],f=[],m=[p[p[o(538)]-1][o(538)],p.length-1],w=[0,0],g="",M=!0,x=!1,y=[],b=-1;class v extends Event{constructor(t){const e=o;super(e(547)),this[e(558)]=t}}class C extends Event{constructor(t){super("shortcut"),this.key=t}}class E extends HTMLElement{get[o(500)](){return x}set hideOutput(t){x=t}get[o(515)](){return M}set[o(515)](t){M=t}get[o(503)](){return g}set[o(503)](t){g=t}get[o(565)](){return m}constructor(){const t=o;super(),c=document[t(529)](t(567)),c[t(497)]=0,u=c[t(491)]("2d"),window[t(510)](t(531),(e=>{this[t(550)]()})),window[t(510)](t(532),(e=>{const n=t,s=Math[n(551)](e[n(521)]),o=this.getCursorPosition()[1],i=Math.max(0,o-(c[n(548)]-45));w[1]=Math[n(498)](0,Math[n(499)](i,w[1]+15*s))})),window[t(510)](t(526),(e=>{this[t(508)](e)})),this[t(566)]({mode:t(507)})}getContext(){return u}[o(545)](){const t=o,e=document[t(529)](t(517));e[t(506)]=t(483),this[t(522)][t(504)](e),this[t(522)][t(504)](c),this[t(557)]()}[o(563)](){const t=o;!c[t(482)]&&this[t(545)](),this[t(550)]()}[o(537)](t,e){const n=o,s=p[n(568)](0,t);s.push(e),s.push(...p[n(568)](t)),m[1]>=t&&m[1]++,this.setBuffer(s)}[o(489)](t){p=t}[o(546)](){p=[""],this.setCursor(0,0)}setCursor(t,e){m[0]=null!=t?t:m[0],m[1]=null!=e?e:m[1]}[o(511)](t=""){this.prefix=t}disableInput(){this[o(515)]=!1}[o(501)](){this[o(515)]=!0}disableLineWrapping(){h=!1}enableLineWrapping(){h=!0}handleSubmit(t){const e=o;x?(t=f[e(527)](""),x=!1):t=t.slice(this.prefix[e(538)]),this[e(561)](t),this[e(494)](new v(t))}pushToHistory(t){""!=t&&y[o(516)](t),b=-1}[o(534)](){const t=o;p[m[1]]=this.prefix,this[t(533)](p[m[1]][t(538)])}[o(541)](t){this.cancelInput(),this.write(t)}read(t){return new Promise((e=>{const n=s,o=p[p.length-1];this.inputEnabled=!0,this.prefix=t||o,t&&o!==t&&this[n(502)](t);const i=t=>{const s=n;e(t[s(558)]),this[s(540)](s(547),i)};this[n(510)]("submit",i)}))}[o(539)](){const t=o,e=p[p[t(538)]-1];return p[t(513)](""),m[0]=""[t(538)],m[1]++,e}[o(502)](t){const e=o;switch(t){case"\0":break;case"\r":const n=this[e(539)]();this[e(486)](n);break;case"\n":this[e(539)]();break;default:const s=u[e(556)]("M");d=s.width;const o=p[m[1]][e(514)]("")[e(568)](0,m[0]);x?(f[e(513)](t),o[e(513)](...new Array(t.length).fill("*"))):o[e(513)](t);const i=p[m[1]][e(514)]("")[e(568)](m[0]);o.push(...i),p[m[1]]=o[e(527)](""),m[0]+=t.length}const n=this[e(554)]()[1];w[1]=Math.max(0,n-(c[e(548)]-45))}[o(508)](t){const e=o;let n=t[e(481)];t[e(536)];const s=t[e(528)];if(M){if(n==e(535)&&this[e(502)]("\r"),n==e(543)&&(b=Math.min(b+1,y[e(538)]-1),y[b]&&this.replaceInput(y[b])),"ArrowDown"==n&&(b=Math[e(498)](b-1,0),y[b]&&this[e(541)](y[b])),n==e(553)&&(m[0]=Math[e(498)](m[0]-1,Math[e(498)](g[e(538)],0))),n==e(484)&&(m[0]=Math[e(499)](m[0]+1,p[p[e(538)]-1][e(538)])),n==e(569)&&this.cancelInput(),n==e(485)&&(m[0]=p[p[e(538)]-1][e(538)]),"Home"==n&&(m[0]=Math[e(498)](g[e(538)],0)),n==e(518)&&m[0]>0&&m[0]>g[e(538)]){const t=p[p.length-1][e(514)]("").slice(0,m[0]-1),n=p[p[e(538)]-1][e(514)]("")[e(568)](m[0]);t.push(...n),p[p[e(538)]-1]=t.join(""),m[0]--}if(n==e(552)){const t=p[p[e(538)]-1].split("")[e(568)](0,m[0]),n=p[p.length-1].split("").slice(m[0]+1);t[e(513)](...n),p[p[e(538)]-1]=t[e(527)]("")}-1!=l[e(519)](n)&&!s&&this[e(502)](n)}if(s){const s=new C(n);!this[e(494)](s)&&(t[e(555)](),t.stopPropagation(),-1!=l[e(519)](n)&&this[e(494)](new v("^"+n)))}}[o(550)](){const t=o;c[t(549)]=this.clientWidth,c.height=this[t(488)];const e=this.getCursorPosition()[1];w[1]=Math.max(0,e-(c[t(548)]-45))}[o(520)](t){const e=o;t[e(544)](0,0,t[e(567)][e(549)],t.canvas[e(548)]),t.font="300 13px monospace",t[e(493)]="left",t[e(512)]=e(492),t.shadowColor=r,t[e(480)]=12,t[e(487)]=r,this[e(530)](),this[e(515)]&&this[e(560)](),t[e(496)]=e(542),t[e(480)]=0}[o(560)](){const t=o;if(Date[t(525)]()/500%2>1){const e=this[t(554)]();u[t(487)]=r,u[t(559)](e[0],e[1]-w[1],6,16)}}[o(509)](){return c.width-2*i[0]}getCursorPosition(){const t=o,e=this[t(509)]();let n=0;for(let s=0;s<m[1];s++){const o=p[s];if(e-u[t(556)](o).width<0&&h){const t=I(o,e/d);for(let e of t)n++}else n++}return[i[0]+m[0]*d+a[0],i[1]+12*n+3*n+6-8+a[1]]}[o(530)](){const t=o,e=this.getMaxBufferWidth();let n=i[0],a=i[1]-w[1];const r=t=>{u[s(490)](t,n,a),a+=15};for(let n of p)if(e-u[t(556)](n)[t(549)]<0&&h){const t=I(n,e/d);for(let e of t)r(e)}else r(n)}[o(557)](){const t=o;this.draw(u),requestAnimationFrame(this[t(557)][t(562)](this))}}function I(t,e){const n=o,s=[];for(t=t.split("");t[n(538)]>e;){const n=t.splice(0,e);s.push(n.join(""))}return s[n(513)](t[n(527)]("")),s}customElements[o(523)](o(495),E);const k=["write","cursor","modules","getItem","data:application/javascript;base64,","parse"," left the room.","[Module] Installed module '","getSocket","getModules","https","loadModules","push",'{ "modules": [] }',"stringify","moduleName","install","message","uninstall","type","Missing install method in module: ","setItem","disableInput","fetchModule","replace","' already installed.","username","delete","get","uninstallModule","indexOf","[Module] Uninstalled module '","origin","left","onmessage","then","data","onopen","connectToWebSocket","print","installModule","commandName","Module not found."];var S,T;S=k,T=190,function(t){for(;--t;)S.push(S.shift())}(++T);const P=function(t,e){return k[t-=334]},L=P,A=new E;let N,W=new Map;const B=L(361);class O{static async[L(370)](){const t=L,e=localStorage[t(362)](B);if(e){const n=JSON.parse(e);for(let e of n[t(361)]){const n=await O.fetchModule(e);O[t(356)](n)}}}static[L(368)](){return W}static async[L(339)](t){const e=L,n=await fetch(t)[e(351)]((t=>t.text())),s=e(363)+btoa(n),o=await fetchModule(s);o.origin=t;let i=localStorage[e(362)](B);!i&&(i=e(372));const a=JSON.parse(i);return-1===a.modules[e(346)](o[e(348)])&&a[e(361)][e(371)](o[e(348)]),localStorage[e(337)](B,JSON[e(373)](a)),o}static async installModule(t){const e=L,n=t[e(374)]||t[e(348)];if(W[e(344)](n))O[e(355)]("[Module] Module '"+n+e(341));else try{if(!t[e(375)])throw new Error(e(336)+path);W.set(n,t),t[e(375)](O),O[e(355)](e(366)+n+"'"),t[e(357)]&&(J[t[e(357)]]=t.run)}catch(t){O[e(355)]("[Error] "+t.message)}}static[L(345)](t){const e=L,n=W[e(344)](t);n?(W[e(343)](t),n[e(334)](),n.commandName&&(J[n[e(357)]]=null),O.print(e(347)+name+"'")):O[e(355)](e(358))}static[L(354)](t=(()=>{})){const e=L;return N=new WebSocket(location[e(348)][e(340)](e(369),"wss").replace("http","ws")),N[e(353)]=e=>{t()},N[e(350)]=t=>{const n=e,s=JSON[n(364)](t[n(352)]);if(s[n(335)]==n(376)){const t=s.data[n(342)]+": "+s.data.text;A.append(A[n(360)][1],t)}if(s[n(335)]==n(349)){const t=s[n(352)][n(342)]+n(365);A.append(A[n(360)][1],t)}},N}static[L(367)](){return N}static getTerminal(){return A}static async simulateWrite(t,e=24){return new Promise((n=>{const s=P;A[s(338)]();let o=0;const i=setInterval((()=>{const e=s,a=t[o];A[e(359)](a),o++,o==t.length&&(clearInterval(i),n())}),e)}))}static[L(355)](t){const e=t.split("\n");for(let t of e)A.write(t),A.write("\n")}static sleep(t){return new Promise((e=>{setTimeout((()=>e()),t)}))}}const j=["message","uninstallModule","getTerminal","[Error] ","Provide a module path.","clear","Bye.","getModules","close","fetchModule","print","\nCommands: \n"];var D,H;D=j,H=403,function(t){for(;--t;)D.push(D.shift())}(++H);const R=function(t,e){return j[t-=454]},J={modules(){const t=R;for(let[e,n]of O[t(454)]())O.print(e)},async install([t]){const e=R;if(t){const n=await O[e(456)](t).catch((t=>{const n=e;O[n(457)](n(462)+t[n(459)])}));await O.installModule(n)}else O[e(457)](e(463))},async uninstall([t]){const e=R;t?await O[e(460)](t):O.print("Provide a module name.")},clear(t){const e=R;O[e(461)]()[e(464)]()},help(){const t=R;O[t(457)](t(458)+Object.keys(this).join(", ")+"\n")},exit:t=>new Promise((t=>{const e=R,n=O[e(461)]();n.setPrefix(""),n.disableInput(),n[e(464)](),O[e(457)](e(465)),setTimeout((()=>window[e(455)]()),1e3)}))};var q,z,F=["ConsoleModule","install","run"];q=F,z=443,function(t){for(;--t;)q.push(q.shift())}(++z);var K=function(t,e){return F[t-=360]};class U{static[K(362)](){}static uninstall(){}static[K(360)](t){}}window[K(361)]=U;const V=["now","cos","fillStyle","toLocaleLowerCase","test-module","test","disableInput","fillRect","install","red","getContext","commandName","shortcut","addEventListener","run"];var Y,$;Y=V,$=480,function(t){for(;--t;)Y.push(Y.shift())}(++$);const G=function(t,e){return V[t-=169]},Q=G;let X;class Z extends ConsoleModule{static get moduleName(){return G(173)}static get[Q(180)](){return Q(174)}static[Q(177)](t){X=t}static[Q(183)](t){return new Promise((t=>{const e=G,n=X.getTerminal();let s=!0;n[e(175)](),n[e(182)](e(181),(n=>{const o=e;"c"==n.key[o(172)]()&&(s=!1,t())}));let o=0,i=0;const a=()=>{const t=e,r=n[t(179)](),l=performance[t(169)]()/100;o+=20*Math.sin(l),i+=5*Math[t(170)](l+l),r[t(171)]=t(178),r[t(176)](400+o,100+i,48,48),s&&requestAnimationFrame(a)};a()}))}}const _=["Connection established.","catch","fetchModule","simulateWrite","slice","disableInput","reload","message","getTerminal","write","Initializing...\n\n","[Error] ","items","clipboardData","addEventListener","shortcut","loadModules",'\nCommand "',"\n[Internal Error]: ","connectToWebSocket","paste","split","terminal@52.59.209.57:~$ ","sleep","Connecting to Interface...","/statc/lib/minimal-module.js","error","key","print","appendChild"];var tt,et;tt=_,et=323,function(t){for(;--t;)tt.push(tt.shift())}(++et);const nt=function(t,e){return _[t-=188]},st=nt(217),ot=[nt(190),"/statc/lib/chat-module.js",Z];let it=null;const at=O[nt(203)]();at[nt(200)](),mainEle[nt(194)](at),setTimeout((async()=>{const t=nt,e=O[t(203)]();await O.print("\n\n@@@@@@            .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@ \n@@@@@@@@,               /@@@.                        @@@(            \n@@@@  @@@@#             /@@@.                        @@@(            \n@@@@    @@@@@@@@@       /@@@.     @@@@@@@@@@@&       @@@(            \n@@@@      @@@@@         /@@@.                        @@@(            \n(@@@        %           /@@@.                        @@@(            \n  .@                    /@@@.     @@@@@@@@@@@@@      @@@@@@@@@@@@@@@/\n\n"),await O.sleep(100),await O[t(198)](t(205),4);for(let e of ot){let n=e;"string"==typeof n&&(n=await O[t(197)](e)[t(196)]((e=>{const n=t;O[n(193)](n(206)+e[n(202)])}))),await O.installModule(n)}async function n(n){const s=t;if(""!=n[0])if(J[n[0]]){it=!1;const t=await J[n[0]](n[s(199)](1));0!==t&&null!=t&&O.print("\nProcess exited.\n"),e.read(st),it=!0}else O[s(193)](s(212)+n[0]+'" not found.\n')}O.print(""),await O[t(211)](),O.print(""),await O[t(188)](100),await O[t(193)](t(189),4),O[t(214)]((async()=>{const s=t;for(O[s(193)](s(195)),O.print(""),await O[s(188)](100);;){const t=(await e.read(st))[s(216)](" ");await n(t)[s(196)]((t=>{const e=s;console[e(191)](t),O[e(193)](e(213)+t[e(202)]+"\n")}))}})),e[t(209)](t(210),(e=>{const n=t;"r"==e[n(192)]?location[n(201)]():"v"==e[n(192)]&&e.preventDefault()})),window[t(209)](t(215),(n=>{const s=t;n[s(208)][s(207)][0].getAsString((t=>{e[s(204)](t)}))}))}),200)})();