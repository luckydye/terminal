(()=>{"use strict";const t=["setBuffer","ctrlKey","bind","min","init","shadowBlur","Delete","shortcut","style","drawCursor","slice","parentNode","inputEnabled","cancelInput","push","Terminal Version 1.0","dispatchEvent","max","getContext","clientHeight","Backspace","fillRect","handleInput","draw","submit","removeEventListener","height","hideOutput","append","Home","clear","\n            :host {\n                display: block;\n                width: 100%;\n                height: 100%;\n            }\n            canvas {\n                filter: contrast(1.1) blur(.33px);\n                outline: none;\n            }\n        ","shiftKey","stopPropagation","resize","createElement","(c) 2020 luckydye. All rights reserved.","attachShadow","setCursor","wheel","replaceInput","shadowColor","fillText","getCursorPosition","Escape","unshift","newline","length","measureText","define","indexOf","fillStyle","loop","prefix","ArrowDown","reformat","px monospace","sign","split","Enter","gyro-terminal","none","write","clearRect","width","top","disableInput","open","join","left","connectedCallback","textBaseline","setPrefix","deltaY","key","ArrowRight","appendChild","cursor","addEventListener","clientWidth","value","tabIndex","handleSubmit","shadowRoot","now","canvas","preventDefault"];var e,n;e=t,n=432,function(t){for(;--t;)e.push(e.shift())}(++n);const s=function(e,n){return t[e-=149]},i=s,o=[32,32],r=[1,0],a="#99d0f7",c=" ~{}=<>^abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ()[]-.,_:;#+'*/&%$§!?€1234567890\"";let l,h,u=7.69,d=[i(167),i(188),""],p=[],f=[d[d[i(199)]-1][i(199)],d.length-1],w=[0,0],m="",g=!0,y=!1,x=[],v=-1;class b extends Event{constructor(t){const e=i;super("submit"),this[e(232)]=t}}class E extends Event{constructor(t){super(i(159)),this.key=t}}class C extends HTMLElement{get[i(179)](){return y}set[i(179)](t){y=t}get inputEnabled(){return g}set[i(164)](t){g=t}get prefix(){return m}set[i(205)](t){m=t}get[i(229)](){return f}constructor(){const t=i;super(),l=document[t(187)](t(150)),l[t(233)]=0,h=l[t(170)]("2d"),window[t(230)](t(186),(e=>{this[t(207)]()})),window.addEventListener(t(191),(e=>{const n=t,s=Math[n(209)](e[n(225)]),i=o[1]+12*f[1]+3*f[1],r=Math[n(169)](0,i-(l.height-45));w[1]=Math[n(169)](0,Math[n(155)](r,w[1]+15*s))})),window[t(230)]("keydown",(t=>{this.handleInput(t)})),this[t(189)]({mode:t(219)})}getContext(){return h}init(){const t=i,e=document.createElement(t(160));e.innerHTML=t(183),this[t(235)][t(228)](e),this[t(235)].appendChild(l),this[t(204)]()}[i(222)](){const t=i;!l[t(163)]&&this[t(156)](),this[t(207)]()}[i(180)](t,e){const n=i,s=d.slice(0,t);s[n(166)](e),s[n(166)](...d[n(162)](t)),f[1]>=t&&f[1]++,this.setBuffer(s)}[i(152)](t){d=t}[i(182)](){d=[""],this[i(190)](0,0)}[i(190)](t,e){f[0]=null!=t?t:f[0],f[1]=null!=e?e:f[1]}[i(224)](t=""){this.prefix=t}[i(218)](){this[i(164)]=!1}enableInput(){this[i(164)]=!0}[i(234)](t){const e=i;y?(t=p.join(""),y=!1):t=t[e(162)](this.prefix[e(199)]),this.pushToHistory(t),this[e(168)](new b(t))}pushToHistory(t){""!=t&&x[i(197)](t),v=-1}[i(165)](){const t=i;d[f[1]]=this[t(205)],this.setCursor(d[f[1]][t(199)])}[i(192)](t){const e=i;this[e(165)](),this[e(214)](t)}read(t){return new Promise((e=>{const n=s,i=d[d[n(199)]-1];this.inputEnabled=!0,this.prefix=t||i,t&&i!==t&&this[n(214)](t);const o=t=>{const s=n;e(t[s(232)]),this[s(177)](s(176),o)};this.addEventListener(n(176),o)}))}[i(198)](){const t=i,e=d[d.length-1];return d.push(""),f[0]=""[t(199)],f[1]++,e}[i(214)](t){const e=i;switch(t){case"\0":break;case"\r":const n=this[e(198)]();this.handleSubmit(n);break;case"\n":this[e(198)]();break;default:const s=h[e(200)]("M");u=s.width;const i=d[f[1]].split("")[e(162)](0,f[0]);y?(p[e(166)](t),i[e(166)](...new Array(t[e(199)]).fill("*"))):i.push(t);const o=d[f[1]].split("").slice(f[0]);i[e(166)](...o),d[f[1]]=i.join(""),f[0]+=t[e(199)]}const n=o[1]+12*f[1]+3*f[1];w[1]=Math[e(169)](0,n-(l[e(178)]-45))}[i(174)](t){const e=i;let n=t[e(226)];t[e(184)];const s=t[e(153)];if(g){if(n==e(211)&&this[e(214)]("\r"),"ArrowUp"==n&&(v=Math.min(v+1,x[e(199)]-1),x[v]&&this[e(192)](x[v])),n==e(206)&&(v=Math[e(169)](v-1,0),x[v]&&this.replaceInput(x[v])),"ArrowLeft"==n&&(f[0]=Math[e(169)](f[0]-1,Math[e(169)](m[e(199)],0))),n==e(227)&&(f[0]=Math[e(155)](f[0]+1,d[d.length-1][e(199)])),n==e(196)&&this.cancelInput(),"End"==n&&(f[0]=d[d[e(199)]-1].length),n==e(181)&&(f[0]=Math[e(169)](m[e(199)],0)),n==e(172)&&f[0]>0&&f[0]>m[e(199)]){const t=d[d[e(199)]-1].split("")[e(162)](0,f[0]-1),n=d[d[e(199)]-1][e(210)]("")[e(162)](f[0]);t.push(...n),d[d.length-1]=t[e(220)](""),f[0]--}if(n==e(158)){const t=d[d[e(199)]-1][e(210)]("")[e(162)](0,f[0]),n=d[d[e(199)]-1][e(210)]("").slice(f[0]+1);t[e(166)](...n),d[d[e(199)]-1]=t[e(220)]("")}-1!=c[e(202)](n)&&!s&&this[e(214)](n)}s&&(t[e(151)](),t[e(185)](),this[e(168)](new E(n)),-1!=c[e(202)](n)&&this.dispatchEvent(new b("^"+n)))}reformat(){const t=i;l.width=this[t(231)],l.height=this[t(171)]}[i(175)](t){const e=i;t[e(215)](0,0,t[e(150)][e(216)],t[e(150)][e(178)]),t.font="300 13"+e(208),t.textAlign=e(221),t[e(223)]=e(217),t[e(193)]=a,t[e(157)]=12,t[e(203)]=a,this.drawBuffer(),this[e(164)]&&this[e(161)](),t.shadowColor=e(213),t[e(157)]=0}[i(161)](){const t=i;if(Date[t(149)]()/500%2>1){const e=this[t(195)]();h[t(203)]=a,h[t(173)](e[0],e[1],6,16)}}[i(195)](){const t=o[0]+f[0]*u,e=o[1]+12*f[1]+3*f[1]+6-8-w[1];return[t+r[0],e+r[1]]}drawBuffer(){const t=i;let e=0;for(let n of d){const s=o[0],i=o[1]+12*e+3*e-w[1];h[t(194)](n,s,i),e++}}[i(204)](){const t=i;this.draw(h),requestAnimationFrame(this[t(204)][t(154)](this))}}customElements[i(201)](i(212),C);const I=["split","left","append","parse","onopen","type","write","text","replace","username","https","data"," left the room.","\nConnection established.","gyro-terminal","length","disableInput","cursor","http","message","wss","origin","onmessage"];var M,k;M=I,k=490,function(t){for(;--t;)M.push(M.shift())}(++k);const L=function(t,e){return I[t-=403]},P=L,S=document.createElement(P(410));let A;function T(){return S}async function B(t,e=24){return new Promise((n=>{S.disableInput();let s=0;const i=setInterval((()=>{const e=L,o=t[s];S.write(o),s++,s==t[e(411)]&&(clearInterval(i),n())}),e)}))}function O(t){const e=P,n=t[e(419)]("\n");for(let t of n)S[e(425)](t),S[e(425)]("\n")}function H(t){return new Promise((e=>{setTimeout((()=>e()),t)}))}S[P(412)](),mainEle.appendChild(S);const j=["fillRect","send","newline","Username: ","red","\nNo help needed :)\n","clear","prefix","addEventListener","leave","Commands: ","log","join","close","shortcut","keys","fillStyle","now","Please provide a chat id to connect to","disableInput","stringify","sin","key","Connecting to chat...","read","toLocaleLowerCase","setPrefix"];var D,N;D=j,N=488,function(t){for(;--t;)D.push(D.shift())}(++N);const R=function(t,e){return j[t-=439]},J={help(t){O(R(442))},prefix(t){const e=R;O(T()[e(444)])},clear(t){const e=R;T()[e(443)]()},async run(t){console[R(448)](t)},list(){const t=R;O(t(447)+Object[t(452)](this)[t(449)](", "))},test:t=>new Promise((t=>{const e=R,n=T();let s=!0;n[e(456)](),n[e(445)](e(451),(n=>{"c"==n[e(459)].toLocaleLowerCase()&&(s=!1,t())}));let i=0,o=0;const r=()=>{const t=e,a=n.getContext(),c=performance[t(454)]()/100;i+=20*Math[t(458)](c),o+=5*Math.cos(c+c),a[t(453)]=t(441),a[t(464)](400+i,100+o,48,48),s&&requestAnimationFrame(r)};r()})),async chat(t){const e=R,n=A,s=t[0];if(""==s||!s)return void O(e(455));const i=T();i[e(463)](""),i[e(456)](),await B(e(460),10),i[e(439)](),i.newline();const o=await i[e(461)](e(440));for(i[e(439)]();;){const t=await i[e(461)]("> ");if(""!=t&&(n.send(JSON.stringify({type:"chat",data:{username:escape(o),room:s,message:t}})),"^c"==t[e(462)]()))return n[e(465)](JSON[e(457)]({type:e(446),data:{username:escape(o),room:s}})),1}},exit:t=>new Promise((t=>{const e=R,n=T();n[e(463)](""),n[e(456)](),n.clear(),O("Bye."),setTimeout((()=>window[e(450)]()),1e3)}))},K=["[OK]","\0\0\0\0","items","read","error","paste",'\nCommand "',"slice","message","getAsString","clipboardData","terminal@52.59.209.57:~$ ","split","catch","Connecting to Interface\0.\0.\0.","\nProcess exited.\n"];var q,F;q=K,F=355,function(t){for(;--t;)q.push(q.shift())}(++F);const U=function(t,e){return K[t-=376]},W=U(384);let z=null;setTimeout((async()=>{const t=U,e=T();async function n(n){const s=t;if(""!=n[0])if(J[n[0]]){z=!1;const t=await J[n[0]](n[s(380)](1));0!==t&&null!=t&&O(s(388)),e[s(376)](W),z=!0}else O(s(379)+n[0]+'" not found.\n')}await O("\n\n@@@@@@            .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@      \n@@@@@@@@,               /@@@.                        @@@(                 \n@@@@  @@@@#             /@@@.                        @@@(                 \n@@@@    @@@@@@@@@       /@@@.     @@@@@@@@@@@&       @@@(                 \n@@@@      @@@@@         /@@@.                        @@@(                 \n(@@@        %           /@@@.                        @@@(                 \n  .@                    /@@@.     @@@@@@@@@@@@@      @@@@@@@@@@@@@@@/     \n\n"),await H(200),await B("Starting up",12),await B("... ",250),await O(t(389)),await H(200),await B(t(387),24),await B(t(390),12),function(t=(()=>{})){const e=P;A=new WebSocket(location[e(417)][e(404)](e(406),e(416)).replace(e(414),"ws")),A[e(423)]=function(n){O(e(409)),t()},A[e(418)]=function(t){const n=e,s=JSON[n(422)](t.data);if(s[n(424)]==n(415)){const t=s[n(407)][n(405)]+": "+s[n(407)][n(403)];S[n(421)](S[n(413)][1],t)}if(s[n(424)]==n(420)){const t=s[n(407)][n(405)]+n(408);S[n(421)](S[n(413)][1],t)}}}((async()=>{const s=t;for(O("");;){const t=(await e.read(W))[s(385)](" ");await n(t)[s(386)]((t=>{const e=s;console[e(377)](t),O("\n[Internal Error]: "+t[e(381)]+"\n")}))}})),window.addEventListener(t(378),(n=>{const s=t;n[s(383)][s(391)][0][s(382)]((t=>{e.write(t)}))}))}),500)})();