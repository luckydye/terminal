(()=>{"use strict";const t=["min","addEventListener","shadowBlur","unshift","cancelInput","inputEnabled","font","textBaseline","read","Home","bind","deltaY","newline"," ~{}=<>^abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ()[]-.,_:;#+'*/&%$§!?€1234567890\"","fillRect","drawCursor","enableInput","value","write","top","length","open","ArrowRight","getMaxBufferWidth","parentNode","clearRect","shortcut","shadowColor","splice","setCursor","disableLineWrapping","loop","replaceInput","Backspace","shiftKey","prefix","(c) 2020 luckydye. All rights reserved.","fillStyle","reformat","createElement","getCursorPosition","resize","ArrowLeft","Enter","setPrefix","setBuffer","tabIndex","key","preventDefault","push","slice","none","canvas","End","ArrowUp","shadowRoot","dispatchEvent","fill","measureText","pushToHistory","textAlign","draw","left","max","Escape","join","attachShadow","init","hideOutput","drawBuffer","clientHeight","connectedCallback","enableLineWrapping","handleInput","fillText","ctrlKey","appendChild","height","getContext","handleSubmit","style","width","Delete","split","submit","\n            :host {\n                display: block;\n                width: 100%;\n                height: 100%;\n            }\n            canvas {\n                filter: contrast(1.1) blur(.33px);\n                outline: none;\n            }\n        ","indexOf","stopPropagation","wheel"];var e,n;e=t,n=226,function(t){for(;--t;)e.push(e.shift())}(++n);const s=function(e,n){return t[e-=208]},i=s,o=[32,32],a=[1,0],r="#99d0f7",c=i(262);let l,h,u=!0,d=7.69,f=["Terminal Version 1.0",i(285),""],p=[],m=[f[f[i(269)]-1][i(269)],f[i(269)]-1],w=[0,0],g="",M=!0,b=!1,v=[],x=-1;class y extends Event{constructor(t){super(i(244)),this.value=t}}class E extends Event{constructor(t){super(i(275)),this.key=t}}class C extends HTMLElement{get[i(228)](){return b}set hideOutput(t){b=t}get[i(254)](){return M}set inputEnabled(t){M=t}get[i(284)](){return g}set prefix(t){g=t}get cursor(){return m}constructor(){const t=i;super(),l=document[t(288)](t(212)),l[t(295)]=0,h=l.getContext("2d"),window.addEventListener(t(290),(e=>{this[t(287)]()})),window.addEventListener(t(248),(e=>{const n=t,s=Math.sign(e[n(260)]),i=this[n(289)]()[1],o=Math[n(223)](0,i-(l.height-45));w[1]=Math[n(223)](0,Math[n(249)](o,w[1]+15*s))})),window[t(250)]("keydown",(e=>{this[t(233)](e)})),this[t(226)]({mode:t(270)})}[i(238)](){return h}[i(227)](){const t=i,e=document[t(288)](t(240));e.innerHTML=t(245),this[t(215)][t(236)](e),this[t(215)][t(236)](l),this[t(280)]()}[i(231)](){const t=i;!l[t(273)]&&this[t(227)](),this.reformat()}append(t,e){const n=i,s=f[n(210)](0,t);s[n(209)](e),s[n(209)](...f.slice(t)),m[1]>=t&&m[1]++,this.setBuffer(s)}[i(294)](t){f=t}clear(){f=[""],this[i(278)](0,0)}[i(278)](t,e){m[0]=null!=t?t:m[0],m[1]=null!=e?e:m[1]}[i(293)](t=""){this[i(284)]=t}disableInput(){this.inputEnabled=!1}[i(265)](){this[i(254)]=!0}[i(279)](){u=!1}[i(232)](){u=!0}[i(239)](t){const e=i;b?(t=p.join(""),b=!1):t=t[e(210)](this[e(284)].length),this[e(219)](t),this[e(216)](new y(t))}[i(219)](t){""!=t&&v[i(252)](t),x=-1}cancelInput(){const t=i;f[m[1]]=this[t(284)],this[t(278)](f[m[1]][t(269)])}[i(281)](t){const e=i;this[e(253)](),this[e(267)](t)}[i(257)](t){return new Promise((e=>{const n=s,i=f[f.length-1];this[n(254)]=!0,this[n(284)]=t||i,t&&i!==t&&this[n(267)](t);const o=t=>{const s=n;e(t[s(266)]),this.removeEventListener(s(244),o)};this[n(250)](n(244),o)}))}newline(){const t=i,e=f[f[t(269)]-1];return f[t(209)](""),m[0]=""[t(269)],m[1]++,e}[i(267)](t){const e=i;switch(t){case"\0":break;case"\r":const n=this[e(261)]();this[e(239)](n);break;case"\n":this[e(261)]();break;default:const s=h[e(218)]("M");d=s.width;const i=f[m[1]].split("")[e(210)](0,m[0]);b?(p[e(209)](t),i[e(209)](...new Array(t[e(269)])[e(217)]("*"))):i.push(t);const o=f[m[1]][e(243)]("")[e(210)](m[0]);i[e(209)](...o),f[m[1]]=i[e(225)](""),m[0]+=t[e(269)]}const n=this[e(289)]()[1];w[1]=Math[e(223)](0,n-(l[e(237)]-45))}[i(233)](t){const e=i;let n=t[e(296)];t[e(283)];const s=t[e(235)];if(M){if(n==e(292)&&this[e(267)]("\r"),n==e(214)&&(x=Math[e(249)](x+1,v[e(269)]-1),v[x]&&this[e(281)](v[x])),"ArrowDown"==n&&(x=Math[e(223)](x-1,0),v[x]&&this.replaceInput(v[x])),n==e(291)&&(m[0]=Math[e(223)](m[0]-1,Math[e(223)](g.length,0))),n==e(271)&&(m[0]=Math[e(249)](m[0]+1,f[f[e(269)]-1].length)),n==e(224)&&this[e(253)](),n==e(213)&&(m[0]=f[f[e(269)]-1].length),n==e(258)&&(m[0]=Math.max(g[e(269)],0)),n==e(282)&&m[0]>0&&m[0]>g[e(269)]){const t=f[f[e(269)]-1][e(243)]("").slice(0,m[0]-1),n=f[f[e(269)]-1][e(243)]("")[e(210)](m[0]);t[e(209)](...n),f[f[e(269)]-1]=t[e(225)](""),m[0]--}if(n==e(242)){const t=f[f.length-1][e(243)]("")[e(210)](0,m[0]),n=f[f[e(269)]-1][e(243)]("")[e(210)](m[0]+1);t[e(209)](...n),f[f[e(269)]-1]=t[e(225)]("")}-1!=c[e(246)](n)&&!s&&this.write(n)}if(s){const s=new E(n);!this.dispatchEvent(s)&&(t[e(208)](),t[e(247)](),-1!=c[e(246)](n)&&this[e(216)](new y("^"+n)))}}[i(287)](){const t=i;l[t(241)]=this.clientWidth,l.height=this[t(230)]}[i(221)](t){const e=i;t[e(274)](0,0,t[e(212)][e(241)],t[e(212)].height),t[e(255)]="300 13px monospace",t[e(220)]=e(222),t[e(256)]=e(268),t[e(276)]=r,t[e(251)]=12,t[e(286)]=r,this.drawBuffer(),this[e(254)]&&this[e(264)](),t.shadowColor=e(211),t[e(251)]=0}drawCursor(){const t=i;if(Date.now()/500%2>1){const e=this[t(289)]();h[t(286)]=r,h[t(263)](e[0],e[1]-w[1],6,16)}}[i(272)](){return l.width-2*o[0]}[i(289)](){const t=i,e=this[t(272)]();let n=0;for(let s=0;s<m[1];s++){const i=f[s];if(e-h.measureText(i)[t(241)]<0&&u){const t=k(i,e/d);for(let e of t)n++}else n++}return[o[0]+m[0]*d+a[0],o[1]+12*n+3*n+6-8+a[1]]}[i(229)](){const t=i,e=this.getMaxBufferWidth();let n=o[0],a=o[1]-w[1];const r=t=>{h[s(234)](t,n,a),a+=15};for(let n of f)if(e-h[t(218)](n)[t(241)]<0&&u){const t=k(n,e/d);for(let e of t)r(e)}else r(n)}[i(280)](){const t=i;this.draw(h),requestAnimationFrame(this[t(280)][t(259)](this))}}function k(t,e){const n=i,s=[];for(t=t[n(243)]("");t.length>e;){const i=t[n(277)](0,e);s.push(i[n(225)](""))}return s[n(209)](t[n(225)]("")),s}customElements.define("gyro-terminal",C);const I=["https","append","data","then","getModules","sleep","installModule","type","simulateWrite","Missing install method in module: ","[Module] Installed module '","origin","disableInput","message","[Error] ","install","http","write","onopen","data:application/javascript;base64,","cursor","getTerminal","left","username"," left the room.","moduleName","connectToWebSocket","set","print","onmessage","replace","text","length"];var T,L;T=I,L=167,function(t){for(;--t;)T.push(T.shift())}(++L);const P=function(t,e){return I[t-=293]},S=P,W=new C;let A,B=new Map;class j{static[S(295)](){return B}static async fetchModule(t){const e=S,n=await fetch(t)[e(294)]((t=>t[e(322)]())),s=e(310)+btoa(n),i=await fetchModule(s);return i[e(302)]=t,i}static async[S(297)](t){const e=S;try{if(!t[e(306)])throw new Error(e(300)+path);{const n=t[e(316)]||t[e(302)];B[e(318)](n,t),t[e(306)](j),j[e(319)](e(301)+n+"'"),t.commandName&&(R[t.commandName]=t.run)}}catch(t){j[e(319)](e(305)+t[e(304)])}}static[S(317)](t=(()=>{})){const e=S;return A=new WebSocket(location[e(302)][e(321)](e(324),"wss")[e(321)](e(307),"ws")),A[e(309)]=e=>{t()},A[e(320)]=t=>{const n=e,s=JSON.parse(t[n(293)]);if(s[n(298)]==n(304)){const t=s[n(293)].username+": "+s.data.text;W[n(325)](W[n(311)][1],t)}if(s[n(298)]==n(313)){const t=s[n(293)][n(314)]+n(315);W.append(W[n(311)][1],t)}},A}static getSocket(){return A}static[S(312)](){return W}static async[S(299)](t,e=24){return new Promise((n=>{const s=P;W[s(303)]();let i=0;const o=setInterval((()=>{const e=s,a=t[i];W[e(308)](a),i++,i==t[e(323)]&&(clearInterval(o),n())}),e)}))}static[S(319)](t){const e=S,n=t.split("\n");for(let t of n)W[e(308)](t),W.write("\n")}static[S(296)](t){return new Promise((e=>{setTimeout((()=>e()),t)}))}}const N=["\nCommands: \n","fetchModule","Provide a module path.","Bye.","[Error] ","catch","installModule","message","disableInput","keys","setPrefix","getTerminal","print","clear"];var D,O;D=N,O=489,function(t){for(;--t;)D.push(D.shift())}(++O);const H=function(t,e){return N[t-=171]},R={modules(){for(let[t,e]of j.getModules())j.print(t)},async install([t]){const e=H;if(t){const n=await j[e(173)](t)[e(177)]((t=>{const n=e;j.print(n(176)+t[n(179)])}));await j[e(178)](n)}else j[e(184)](e(174))},clear(t){const e=H;j[e(183)]()[e(171)]()},help(){const t=H;j[t(184)](t(172)+Object[t(181)](this).join(", ")+"\n")},exit:t=>new Promise((t=>{const e=H,n=j[e(183)]();n[e(182)](""),n[e(180)](),n[e(171)](),j[e(184)](e(175)),setTimeout((()=>window.close()),1e3)}))};var K,q,F=["install","ConsoleModule"];K=F,q=155,function(t){for(;--t;)K.push(K.shift())}(++q);var z=function(t,e){return F[t-=312]};class J{static[z(313)](){}static run(t){}}window[z(312)]=J;const U=["moduleName","toLocaleLowerCase","getContext","install","disableInput","shortcut","test","sin","test-module","fillStyle","commandName","getTerminal","red","run","fillRect","key"];var V,Y;V=U,Y=500,function(t){for(;--t;)V.push(V.shift())}(++Y);const $=function(t,e){return U[t-=239]},G=$;let Q;class X extends ConsoleModule{static get[G(251)](){return G(243)}static get[G(245)](){return G(241)}static[G(254)](t){Q=t}static[G(248)](t){return new Promise((t=>{const e=$,n=Q[e(246)]();let s=!0;n[e(239)](),n.addEventListener(e(240),(n=>{const i=e;"c"==n[i(250)][i(252)]()&&(s=!1,t())}));let i=0,o=0;const a=()=>{const t=e,r=n[t(253)](),c=performance.now()/100;i+=20*Math[t(242)](c),o+=5*Math.cos(c+c),r[t(244)]=t(247),r[t(249)](400+i,100+o,48,48),s&&requestAnimationFrame(a)};a()}))}}const Z=["read","message","print","Starting up","\nProcess exited.\n","/statc/lib/chat-module.js","installModule","[OK]\n","getTerminal","simulateWrite","catch","fetchModule",'" not found.\n',"disableInput","key",'\nCommand "',"Connecting to Interface\0.\0.\0.","reload","preventDefault","string","/statc/lib/minimal-module.js","... ","\0\0\0\0","write","addEventListener","\n[Internal Error]: ","\n\n@@@@@@            .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@ \n@@@@@@@@,               /@@@.                        @@@(            \n@@@@  @@@@#             /@@@.                        @@@(            \n@@@@    @@@@@@@@@       /@@@.     @@@@@@@@@@@&       @@@(            \n@@@@      @@@@@         /@@@.                        @@@(            \n(@@@        %           /@@@.                        @@@(            \n  .@                    /@@@.     @@@@@@@@@@@@@      @@@@@@@@@@@@@@@/\n\n","shortcut","sleep","split","terminal@52.59.209.57:~$ ","appendChild","getAsString","paste"];var _,tt;_=Z,tt=384,function(t){for(;--t;)_.push(_.shift())}(++tt);const et=function(t,e){return Z[t-=423]},nt=et(439),st=et(443),it=[et(433),et(452),X];let ot=null;const at=j[et(455)]();at[et(426)](),mainEle[et(444)](at),setTimeout((async()=>{const t=et,e=j[t(455)]();await j[t(449)](nt),await j.sleep(200),await j[t(456)](t(450),12),await j.simulateWrite(t(434),250),j.print(t(454));for(let e of it){let n=e;typeof n===t(432)&&(n=await j[t(424)](e)[t(423)]((e=>{const n=t;j[n(449)]("[Error] "+e[n(448)])}))),await j[t(453)](n)}async function n(n){const s=t;if(""!=n[0])if(R[n[0]]){ot=!1;const t=await R[n[0]](n.slice(1));0!==t&&null!=t&&j.print(s(451)),e[s(447)](st),ot=!0}else j[s(449)](s(428)+n[0]+s(425))}j.print(""),await j[t(441)](200),await j[t(456)](t(429),24),await j[t(456)](t(435),12),j.connectToWebSocket((async()=>{const s=t;for(j[s(449)]("\nConnection established."),j[s(449)](""),await j[s(441)](200);;){const t=(await e[s(447)](st))[s(442)](" ");await n(t).catch((t=>{const e=s;console.error(t),j[e(449)](e(438)+t[e(448)]+"\n")}))}})),e[t(437)](t(440),(e=>{const n=t;"r"==e[n(427)]?location[n(430)]():"v"==e[n(427)]&&e[n(431)]()})),window.addEventListener(t(446),(n=>{const s=t;n.clipboardData.items[0][s(445)]((t=>{e[s(436)](t)}))}))}),200)})();