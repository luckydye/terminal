(()=>{"use strict";const t=["gyro-terminal","sign","cancelInput","hideOutput","appendChild","splice","replaceInput","getMaxBufferWidth","length","newline","shiftKey","ArrowDown","textBaseline","max","split","shadowColor","measureText","font","pushToHistory","read","fillStyle","setBuffer","unshift","createElement","parentNode","join","setPrefix","ctrlKey","top","ArrowUp","shadowBlur","attachShadow","clear","push","prefix","clearRect","indexOf","init","setCursor","style","dispatchEvent","deltaY","connectedCallback","handleInput","Escape","enableInput","slice","wheel","(c) 2020 luckydye. All rights reserved.","write","append","tabIndex","fill","open","addEventListener","Home","textAlign","disableInput","left","#99d0f7","innerHTML","Terminal Version 1.0","preventDefault","End","key","removeEventListener","getCursorPosition","\n            :host {\n                display: block;\n                width: 100%;\n                height: 100%;\n            }\n            canvas {\n                filter: contrast(1.1) blur(.33px);\n                outline: none;\n            }\n        ","clientHeight","cursor","min","inputEnabled","height","Enter","canvas","Delete","value","ArrowLeft"," ~{}=<>^abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ()[]-.,_:;#+'*/&%$§!?€1234567890\"","draw","px monospace","drawBuffer","bind","reformat","now","stopPropagation","width","drawCursor","none","submit","shadowRoot"];var e,n;e=t,n=433,function(t){for(;--t;)e.push(e.shift())}(++n);const s=function(e,n){return t[e-=223]},i=s,o=[32,32],a=[1,0],r=i(304),c=i(232);let l,h,u=7.69,d=[i(306),i(293),""],p=[],f=[d[d[i(253)]-1][i(253)],d[i(253)]-1],m=[0,0],w="",g=!0,y=!1,x=[],v=-1;class b extends Event{constructor(t){const e=i;super(e(243)),this[e(230)]=t}}class E extends Event{constructor(t){super("shortcut"),this.key=t}}class C extends HTMLElement{get[i(248)](){return y}set[i(248)](t){y=t}get inputEnabled(){return g}set inputEnabled(t){g=t}get[i(279)](){return w}set[i(279)](t){w=t}get[i(223)](){return f}constructor(){const t=i;super(),l=document.createElement("canvas"),l[t(296)]=0,h=l.getContext("2d"),window[t(299)]("resize",(e=>{this[t(237)]()})),window[t(299)](t(292),(e=>{const n=t,s=Math[n(246)](e[n(286)]),i=o[1]+12*f[1]+3*f[1],a=Math[n(258)](0,i-(l[n(226)]-45));m[1]=Math[n(258)](0,Math[n(224)](a,m[1]+15*s))})),window[t(299)]("keydown",(e=>{this[t(288)](e)})),this[t(276)]({mode:t(298)})}getContext(){return h}[i(282)](){const t=i,e=document[t(268)](t(284));e[t(305)]=t(312),this[t(244)].appendChild(e),this[t(244)][t(249)](l),this.loop()}[i(287)](){const t=i;!l[t(269)]&&this[t(282)](),this.reformat()}[i(295)](t,e){const n=i,s=d[n(291)](0,t);s[n(278)](e),s[n(278)](...d.slice(t)),f[1]>=t&&f[1]++,this[n(266)](s)}setBuffer(t){d=t}[i(277)](){d=[""],this[i(283)](0,0)}[i(283)](t,e){f[0]=null!=t?t:f[0],f[1]=null!=e?e:f[1]}[i(271)](t=""){this[i(279)]=t}[i(302)](){this[i(225)]=!1}[i(290)](){this[i(225)]=!0}handleSubmit(t){const e=i;y?(t=p[e(270)](""),y=!1):t=t[e(291)](this[e(279)][e(253)]),this[e(263)](t),this.dispatchEvent(new b(t))}[i(263)](t){""!=t&&x[i(267)](t),v=-1}[i(247)](){const t=i;d[f[1]]=this[t(279)],this[t(283)](d[f[1]][t(253)])}[i(251)](t){const e=i;this[e(247)](),this[e(294)](t)}[i(264)](t){return new Promise((e=>{const n=s,i=d[d[n(253)]-1];this[n(225)]=!0,this[n(279)]=t||i,t&&i!==t&&this[n(294)](t);const o=t=>{const s=n;e(t.value),this[s(310)](s(243),o)};this[n(299)](n(243),o)}))}[i(254)](){const t=i,e=d[d[t(253)]-1];return d[t(278)](""),f[0]=""[t(253)],f[1]++,e}[i(294)](t){const e=i;switch(t){case"\0":break;case"\r":const n=this.newline();this.handleSubmit(n);break;case"\n":this[e(254)]();break;default:const s=h[e(261)]("M");u=s.width;const i=d[f[1]][e(259)]("")[e(291)](0,f[0]);y?(p.push(t),i[e(278)](...new Array(t[e(253)])[e(297)]("*"))):i.push(t);const o=d[f[1]][e(259)]("").slice(f[0]);i[e(278)](...o),d[f[1]]=i[e(270)](""),f[0]+=t[e(253)]}const n=o[1]+12*f[1]+3*f[1];m[1]=Math.max(0,n-(l[e(226)]-45))}[i(288)](t){const e=i;let n=t[e(309)];t[e(255)];const s=t[e(272)];if(g){if(n==e(227)&&this[e(294)]("\r"),n==e(274)&&(v=Math.min(v+1,x[e(253)]-1),x[v]&&this.replaceInput(x[v])),n==e(256)&&(v=Math[e(258)](v-1,0),x[v]&&this.replaceInput(x[v])),n==e(231)&&(f[0]=Math.max(f[0]-1,Math[e(258)](w[e(253)],0))),"ArrowRight"==n&&(f[0]=Math.min(f[0]+1,d[d[e(253)]-1][e(253)])),n==e(289)&&this[e(247)](),n==e(308)&&(f[0]=d[d[e(253)]-1][e(253)]),n==e(300)&&(f[0]=Math[e(258)](w[e(253)],0)),"Backspace"==n&&f[0]>0&&f[0]>w[e(253)]){const t=d[d[e(253)]-1].split("").slice(0,f[0]-1),n=d[d[e(253)]-1][e(259)]("")[e(291)](f[0]);t[e(278)](...n),d[d.length-1]=t[e(270)](""),f[0]--}if(n==e(229)){const t=d[d[e(253)]-1][e(259)]("").slice(0,f[0]),n=d[d[e(253)]-1][e(259)]("")[e(291)](f[0]+1);t[e(278)](...n),d[d[e(253)]-1]=t[e(270)]("")}-1!=c[e(281)](n)&&!s&&this.write(n)}s&&(t[e(307)](),t[e(239)](),this[e(285)](new E(n)),-1!=c.indexOf(n)&&this[e(285)](new b("^"+n)))}reformat(){const t=i;l[t(240)]=this.clientWidth,l.height=this[t(313)]}[i(233)](t){const e=i;t[e(280)](0,0,t.canvas[e(240)],t[e(228)][e(226)]),t[e(262)]="300 13"+e(234),t[e(301)]=e(303),t[e(257)]=e(273),t[e(260)]=r,t[e(275)]=12,t[e(265)]=r,this.drawBuffer(),this[e(225)]&&this[e(241)](),t[e(260)]=e(242),t[e(275)]=0}[i(241)](){const t=i;if(Date[t(238)]()/500%2>1){const e=this[t(311)]();h[t(265)]=r,h.fillRect(e[0],e[1],6,16)}}[i(252)](){return l[i(240)]-2*o[0]}[i(311)](){const t=i;this[t(252)]();let e=0;for(let n=0;n<f[1];n++){const s=d[n];h[t(261)](s).width,e++}const n=o[0]+f[0]*u,s=o[1]+12*e+3*e+6-8-m[1];return[n+a[0],s+a[1]]}[i(235)](){const t=i;this[t(252)]();let e=o[0],n=o[1];for(let i of d)h[t(261)](i).width,s=i,h.fillText(s,e,n),n+=15-m[1];var s}loop(){const t=i;this[t(233)](h),requestAnimationFrame(this.loop[t(236)](this))}}customElements.define(i(245),C);const I=["gyro-terminal"," left the room.","onopen","parse","wss","onmessage","text","disableInput","username","message","append","type","https","replace","write","cursor","createElement","data"];var M,k;M=I,k=166,function(t){for(;--t;)M.push(M.shift())}(++k);const L=function(t,e){return I[t-=269]},P=L,S=document[P(281)](P(283));let A;function B(){return S}async function T(t,e=24){return new Promise((n=>{S.disableInput();let s=0;const i=setInterval((()=>{const e=L,o=t[s];S[e(279)](o),s++,s==t.length&&(clearInterval(i),n())}),e)}))}function O(t){const e=P,n=t.split("\n");for(let t of n)S.write(t),S[e(279)]("\n")}function D(t){return new Promise((e=>{setTimeout((()=>e()),t)}))}S[P(272)](),mainEle.appendChild(S);const H=["newline","chat","now","clear","send","fillStyle","setPrefix","leave","prefix","join","key","fillRect","shortcut","sin","keys","log","stringify","Username: ","Connecting to chat...","toLocaleLowerCase","red","cos","getContext","disableInput","close","read"];var N,R;N=H,R=383,function(t){for(;--t;)N.push(N.shift())}(++R);const j=function(t,e){return H[t-=464]},J={help(t){O("\nNo help needed :)\n")},prefix(t){const e=j;O(B()[e(479)])},clear(t){const e=j;B()[e(474)]()},async run(t){console[j(486)](t)},list(){const t=j;O("Commands: "+Object[t(485)](this)[t(480)](", "))},test:t=>new Promise((t=>{const e=j,n=B();let s=!0;n[e(468)](),n.addEventListener(e(483),(n=>{const i=e;"c"==n[i(481)][i(464)]()&&(s=!1,t())}));let i=0,o=0;const a=()=>{const t=e,r=n[t(467)](),c=performance[t(473)]()/100;i+=20*Math[t(484)](c),o+=5*Math[t(466)](c+c),r[t(476)]=t(465),r[t(482)](400+i,100+o,48,48),s&&requestAnimationFrame(a)};a()})),async chat(t){const e=j,n=A,s=t[0];if(""==s||!s)return void O("Please provide a chat id to connect to");const i=B();i[e(477)](""),i[e(468)](),await T(e(489),10),i[e(471)](),i[e(471)]();const o=await i[e(470)](e(488));for(i[e(471)]();;){const t=await i[e(470)]("> ");if(""!=t&&(n[e(475)](JSON[e(487)]({type:e(472),data:{username:escape(o),room:s,message:t}})),"^c"==t.toLocaleLowerCase()))return n.send(JSON[e(487)]({type:e(478),data:{username:escape(o),room:s}})),1}},exit:t=>new Promise((t=>{const e=j,n=B();n[e(477)](""),n[e(468)](),n[e(474)](),O("Bye."),setTimeout((()=>window[e(469)]()),1e3)}))},K=["[OK]","catch","clipboardData","message",'" not found.\n',"getAsString","split","read","terminal@52.59.209.57:~$ ","\nLorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s\n","Connecting to Interface\0.\0.\0.","\n\n@@@@@@            .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@      \n@@@@@@@@,               /@@@.                        @@@(                 \n@@@@  @@@@#             /@@@.                        @@@(                 \n@@@@    @@@@@@@@@       /@@@.     @@@@@@@@@@@&       @@@(                 \n@@@@      @@@@@         /@@@.                        @@@(                 \n(@@@        %           /@@@.                        @@@(                 \n  .@                    /@@@.     @@@@@@@@@@@@@      @@@@@@@@@@@@@@@/     \n\n","Starting up","... ","error","\0\0\0\0","paste"];var W,q;W=K,q=283,function(t){for(;--t;)W.push(W.shift())}(++q);const F=function(t,e){return K[t-=253]},U=F(253),z=F(267);let V=null;setTimeout((async()=>{const t=F,e=B();async function n(n){const s=t;if(""!=n[0])if(J[n[0]]){V=!1;const t=await J[n[0]](n.slice(1));0!==t&&null!=t&&O("\nProcess exited.\n"),e[s(266)](z),V=!0}else O('\nCommand "'+n[0]+s(263))}await O(U),await D(200),await T(t(254),12),await T(t(255),250),await O(t(259)),await O(t(268)),await D(200),await T(t(269),24),await T(t(257),12),function(t=(()=>{})){const e=P;A=new WebSocket(location.origin[e(278)](e(277),e(269)).replace("http","ws")),A[e(285)]=function(e){O("\nConnection established."),t()},A[e(270)]=function(t){const n=e,s=JSON[n(286)](t[n(282)]);if(s[n(276)]==n(274)){const t=s.data.username+": "+s[n(282)][n(271)];S[n(275)](S[n(280)][1],t)}if("left"==s[n(276)]){const t=s.data[n(273)]+n(284);S[n(275)](S[n(280)][1],t)}}}((async()=>{const s=t;for(O("");;){const t=(await e.read(z))[s(265)](" ");await n(t)[s(260)]((t=>{const e=s;console[e(256)](t),O("\n[Internal Error]: "+t[e(262)]+"\n")}))}})),window.addEventListener(t(258),(n=>{const s=t;n[s(261)].items[0][s(264)]((t=>{e.write(t)}))}))}),500)})();