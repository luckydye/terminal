(()=>{"use strict";const t=["loop","cancelInput","canvas","(c) 2020 luckydye. All rights reserved.","dispatchEvent","setCursor","Escape","reformat","fillStyle","Terminal Version 1.0","stopPropagation","enableInput","textAlign","height","left","appendChild","attachShadow","shadowRoot","newline","preventDefault","Enter","getMaxBufferWidth","setPrefix","ArrowUp","none","key","top","push","Backspace","cursor","fill","max","wheel","unshift","Home","replaceInput","min","fillRect","textBaseline","tabIndex","sign","ArrowRight","createElement","join","shadowBlur","pushToHistory","removeEventListener","clientHeight","getCursorPosition","split","inputEnabled","now","drawBuffer","hideOutput","setBuffer","parentNode","getContext","ArrowDown","clearRect","\n            :host {\n                display: block;\n                width: 100%;\n                height: 100%;\n            }\n            canvas {\n                filter: contrast(1.1) blur(.33px);\n                outline: none;\n            }\n        "," ~{}=<>^abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ()[]-.,_:;#+'*/&%$§!?€1234567890\"","measureText","resize","init","submit","handleSubmit","drawCursor","style","shadowColor","draw","handleInput","width","deltaY","disableInput","#99d0f7","innerHTML","slice","addEventListener","font","gyro-terminal","ctrlKey","px monospace","length","bind","write","prefix","indexOf"];var e,n;e=t,n=194,function(t){for(;--t;)e.push(e.shift())}(++n);const s=function(e,n){return t[e-=385]},o=s,i=[32,32],a=[1,0],r=o(439),l=o(425);let c,u,h=!0,d=7.69,f=[o(461),o(455),""],p=[],m=[f[f.length-1][o(447)],f[o(447)]-1],w=[0,0],g="",M=!0,v=!1,y=[],b=-1;class x extends Event{constructor(t){super(o(429)),this.value=t}}class E extends Event{constructor(t){const e=o;super("shortcut"),this[e(390)]=t}}class C extends HTMLElement{get[o(418)](){return v}set[o(418)](t){v=t}get[o(415)](){return M}set[o(415)](t){M=t}get[o(450)](){return g}set[o(450)](t){g=t}get[o(394)](){return m}constructor(){const t=o;super(),c=document[t(407)](t(454)),c[t(404)]=0,u=c[t(421)]("2d"),window[t(442)](t(427),(e=>{this[t(459)]()})),window[t(442)](t(397),(e=>{const n=t,s=Math[n(405)](e[n(437)]),o=this.getCursorPosition()[1],i=Math[n(396)](0,o-(c[n(465)]-45));w[1]=Math.max(0,Math[n(401)](i,w[1]+15*s))})),window[t(442)]("keydown",(e=>{this[t(435)](e)})),this[t(468)]({mode:"open"})}[o(421)](){return u}[o(428)](){const t=o,e=document[t(407)](t(432));e[t(440)]=t(424),this.shadowRoot.appendChild(e),this[t(469)][t(467)](c),this[t(452)]()}connectedCallback(){const t=o;!c[t(420)]&&this[t(428)](),this[t(459)]()}append(t,e){const n=o,s=f.slice(0,t);s[n(392)](e),s[n(392)](...f[n(441)](t)),m[1]>=t&&m[1]++,this.setBuffer(s)}[o(419)](t){f=t}clear(){f=[""],this[o(457)](0,0)}[o(457)](t,e){m[0]=null!=t?t:m[0],m[1]=null!=e?e:m[1]}[o(387)](t=""){this[o(450)]=t}[o(438)](){this.inputEnabled=!1}[o(463)](){this[o(415)]=!0}disableLineWrapping(){h=!1}enableLineWrapping(){h=!0}[o(430)](t){const e=o;v?(t=p[e(408)](""),v=!1):t=t[e(441)](this[e(450)].length),this[e(410)](t),this[e(456)](new x(t))}[o(410)](t){""!=t&&y[o(398)](t),b=-1}[o(453)](){const t=o;f[m[1]]=this[t(450)],this.setCursor(f[m[1]].length)}replaceInput(t){const e=o;this[e(453)](),this[e(449)](t)}read(t){return new Promise((e=>{const n=s,o=f[f[n(447)]-1];this.inputEnabled=!0,this[n(450)]=t||o,t&&o!==t&&this[n(449)](t);const i=t=>{const s=n;e(t.value),this[s(411)](s(429),i)};this.addEventListener(n(429),i)}))}newline(){const t=o,e=f[f[t(447)]-1];return f[t(392)](""),m[0]=""[t(447)],m[1]++,e}write(t){const e=o;switch(t){case"\0":break;case"\r":const n=this[e(470)]();this[e(430)](n);break;case"\n":this.newline();break;default:const s=f[m[1]][e(414)]("").slice(0,m[0]);v?(p[e(392)](t),s[e(392)](...new Array(t[e(447)])[e(395)]("*"))):s[e(392)](t);const o=f[m[1]][e(414)]("")[e(441)](m[0]);s[e(392)](...o),f[m[1]]=s.join(""),m[0]+=t[e(447)]}const n=this.getCursorPosition()[1];w[1]=Math[e(396)](0,n-(c[e(465)]-45))}[o(435)](t){const e=o;let n=t[e(390)];t.shiftKey;const s=t[e(445)];if(M){if(n==e(385)&&this[e(449)]("\r"),n==e(388)&&(b=Math[e(401)](b+1,y[e(447)]-1),y[b]&&this[e(400)](y[b])),n==e(422)&&(b=Math[e(396)](b-1,0),y[b]&&this[e(400)](y[b])),"ArrowLeft"==n&&(m[0]=Math[e(396)](m[0]-1,Math[e(396)](g[e(447)],0))),n==e(406)&&(m[0]=Math[e(401)](m[0]+1,f[f.length-1][e(447)])),n==e(458)&&this.cancelInput(),"End"==n&&(m[0]=f[f[e(447)]-1].length),n==e(399)&&(m[0]=Math[e(396)](g[e(447)],0)),n==e(393)&&m[0]>0&&m[0]>g[e(447)]){const t=f[f[e(447)]-1][e(414)]("")[e(441)](0,m[0]-1),n=f[f[e(447)]-1][e(414)]("")[e(441)](m[0]);t[e(392)](...n),f[f[e(447)]-1]=t[e(408)](""),m[0]--}if("Delete"==n){const t=f[f[e(447)]-1][e(414)]("")[e(441)](0,m[0]),n=f[f.length-1][e(414)]("")[e(441)](m[0]+1);t[e(392)](...n),f[f.length-1]=t[e(408)]("")}-1!=l[e(451)](n)&&!s&&this.write(n)}if(s){const s=new E(n);!this[e(456)](s)&&(t[e(471)](),t[e(462)](),-1!=l[e(451)](n)&&this[e(456)](new x("^"+n)))}}[o(459)](){const t=o;c[t(436)]=this.clientWidth,c.height=this[t(412)];const e=this[t(413)]()[1];w[1]=Math[t(396)](0,e-(c[t(465)]-45))}[o(434)](t){const e=o;t[e(423)](0,0,t.canvas[e(436)],t.canvas[e(465)]),t[e(443)]="300 13"+e(446),t[e(464)]=e(466),t[e(403)]=e(391),t[e(433)]=r,t.shadowBlur=12,t[e(460)]=r,this[e(417)](),this[e(415)]&&this[e(431)](),t[e(433)]=e(389),t[e(409)]=0}drawCursor(){const t=o;if(Date[t(416)]()/500%2>1){const e=this[t(413)]();u[t(460)]=r,u[t(402)](e[0],e[1]-w[1],6,16)}}getMaxBufferWidth(){return c[o(436)]-2*i[0]}[o(413)](){const t=o,e=u[t(426)]("M");d=e[t(436)];const n=this.getMaxBufferWidth();let s=0;for(let e=0;e<m[1];e++){const o=f[e];if(n-u[t(426)](o)[t(436)]<0&&h){const t=I(o,n/d);for(let e of t)s++}else s++}return[i[0]+m[0]*d+a[0],i[1]+12*s+3*s+6-8+a[1]]}[o(417)](){const t=o,e=this[t(386)]();let n=i[0],s=i[1]-w[1];const a=t=>{u.fillText(t,n,s),s+=15};for(let n of f)if(e-u[t(426)](n)[t(436)]<0&&h){const t=I(n,e/d);for(let e of t)a(e)}else a(n)}[o(452)](){const t=o;this[t(434)](u),requestAnimationFrame(this[t(452)][t(448)](this))}}function I(t,e){const n=o,s=[];for(t=t[n(414)]("");t[n(447)]>e;){const o=t.splice(0,e);s[n(392)](o[n(408)](""))}return s[n(392)](t[n(408)]("")),s}customElements.define(o(444),C);const k=["getModules","' already installed.","then","commandName","text","indexOf","cursor","get","append","replace","installModule","install","modules","set","disableInput","sleep","Module not found.","connectToWebSocket","[Module] Module '","data","simulateWrite","[Module] Installed module '","username",'{ "modules": [] }',"push","onmessage","origin","splice","print","[Error] "," left the room.","setItem","run","moduleName","wss","write","type","length","parse","loadModules","getSocket","stringify","uninstall","getTerminal","delete","Missing install method in module: ","split"];var T,P;T=k,P=438,function(t){for(;--t;)T.push(T.shift())}(++P);const S=function(t,e){return k[t-=468]},L=S,B=new C;let W,A=new Map;const N=L(512);function j(){const t=L;let e=localStorage.getItem(N);return!e&&(e=t(476)),JSON[t(491)](e)}function O(t){const e=L;localStorage[e(484)](N,JSON[e(494)](t))}class D{static async[L(492)](){const t=L,e=j();for(let n of e[t(512)]){const e=await D.fetchModule(n);D[t(510)](e)}}static[L(500)](){return A}static async fetchModule(t){const e=L,n=await fetch(t)[e(502)]((t=>t[e(504)]())),s="data:application/javascript;base64,"+btoa(n),o=await fetchModule(s);o[e(479)]=t;let i=j();return-1===i.modules[e(505)](o[e(479)])&&i.modules[e(477)](o.origin),O(i),o}static async installModule(t){const e=L,n=t[e(486)]||t[e(479)];if(A[e(507)](n))D[e(481)](e(471)+n+e(501));else try{if(!t.install)throw new Error(e(498)+path);A[e(513)](n,t),t[e(511)](D),D[e(481)](e(474)+n+"'"),t[e(503)]&&(z[t[e(503)]]=t[e(485)])}catch(t){D.print(e(482)+t.message)}}static uninstallModule(t){const e=L,n=A[e(507)](t);if(n){A[e(497)](t),n[e(495)](),n[e(503)]&&(z[n[e(503)]]=null);let s=j();s[e(512)][e(480)](s.modules[e(505)](n[e(479)]),1),O(s),D[e(481)]("[Module] Uninstalled module '"+t+"'")}else D[e(481)](e(469))}static[L(470)](t=(()=>{})){const e=L;return W=new WebSocket(location[e(479)][e(509)]("https",e(487))[e(509)]("http","ws")),W.onopen=e=>{t()},W[e(478)]=t=>{const n=e,s=JSON[n(491)](t.data);if("message"==s[n(489)]){const t=s[n(472)][n(475)]+": "+s[n(472)][n(504)];B.append(B.cursor[1],t)}if("left"==s[n(489)]){const t=s.data[n(475)]+n(483);B[n(508)](B[n(506)][1],t)}},W}static[L(493)](){return W}static[L(496)](){return B}static async[L(473)](t,e=24){return new Promise((n=>{const s=S;B[s(514)]();let o=0;const i=setInterval((()=>{const e=s,a=t[o];B[e(488)](a),o++,o==t[e(490)]&&(clearInterval(i),n())}),e)}))}static[L(481)](t){const e=t[L(499)]("\n");for(let t of e)B.write(t),B.write("\n")}static[L(468)](t){return new Promise((e=>{setTimeout((()=>e()),t)}))}}const R=["setPrefix","join","print","installModule","Provide a module path.","getTerminal","close","message","disableInput","clear","[Error] ","keys"];var H,J;H=R,J=196,function(t){for(;--t;)H.push(H.shift())}(++J);const q=function(t,e){return R[t-=495]},z={modules(){for(let[t,e]of D.getModules())D.print(t)},async install([t]){const e=q;if(t){const n=await D.fetchModule(t).catch((t=>{const e=q;D.print(e(501)+t[e(498)])}));await D[e(506)](n)}else D.print(e(495))},async uninstall([t]){const e=q;t&&""!=t?await D.uninstallModule(t):D[e(505)]("Provide a module name.")},clear(t){const e=q;D[e(496)]()[e(500)]()},help(){const t=q;D[t(505)]("\nCommands: \n"+Object[t(502)](this)[t(504)](", ")+"\n")},exit:t=>new Promise((t=>{const e=q,n=D[e(496)]();n[e(503)](""),n[e(499)](),n[e(500)](),D[e(505)]("Bye."),setTimeout((()=>window[e(497)]()),1e3)}))};var F,K,U=["ConsoleModule","run","uninstall"];F=U,K=108,function(t){for(;--t;)F.push(F.shift())}(++K);var V=function(t,e){return U[t-=485]};class Y{static install(){}static[V(487)](){}static[V(486)](t){}}window[V(485)]=Y;const $=["now","getContext","moduleName","sin","getTerminal","addEventListener","test-module","test","cos","fillRect","toLocaleLowerCase","key","red","disableInput","shortcut","commandName","run","install"];var G,Q;G=$,Q=418,function(t){for(;--t;)G.push(G.shift())}(++Q);const X=function(t,e){return $[t-=145]},Z=X;let _;class tt extends ConsoleModule{static get[Z(161)](){return Z(147)}static get[Z(156)](){return Z(148)}static[Z(158)](t){_=t}static[Z(157)](t){return new Promise((t=>{const e=X,n=_[e(145)]();let s=!0;n[e(154)](),n[e(146)](e(155),(n=>{const o=e;"c"==n[o(152)][o(151)]()&&(s=!1,t())}));let o=0,i=0;const a=()=>{const t=e,r=n[t(160)](),l=performance[t(159)]()/100;o+=20*Math[t(162)](l),i+=5*Math[t(149)](l+l),r.fillStyle=t(153),r[t(150)](400+o,100+i,48,48),s&&requestAnimationFrame(a)};a()}))}}const et=["string","slice","shortcut","[Error] ","read","getTerminal","getAsString","\n\n@@@@@@            .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@     @@@@@@@@@@@@@@@ \n@@@@@@@@,               /@@@.                        @@@(            \n@@@@  @@@@#             /@@@.                        @@@(            \n@@@@    @@@@@@@@@       /@@@.     @@@@@@@@@@@&       @@@(            \n@@@@      @@@@@         /@@@.                        @@@(            \n(@@@        %           /@@@.                        @@@(            \n  .@                    /@@@.     @@@@@@@@@@@@@      @@@@@@@@@@@@@@@/\n\n","\n[Internal Error]: ","installModule","items","connectToWebSocket",'" not found.\n',"Connecting to Interface...","preventDefault","Connection established.","appendChild","/statc/lib/chat-module.js","key","split","message","print","sleep","/statc/lib/minimal-module.js","simulateWrite","terminal@52.59.209.57:~$ ","reload","write","loadModules","disableInput","clipboardData","addEventListener"];var nt,st;nt=et,st=374,function(t){for(;--t;)nt.push(nt.shift())}(++st);const ot=function(t,e){return et[t-=217]},it=ot(234),at=ot(220),rt=[ot(218),ot(244),tt];let lt=null;const ct=D[ot(232)]();ct[ot(224)](),mainEle[ot(243)](ct),setTimeout((async()=>{const t=ot,e=D.getTerminal();await D[t(248)](it),await D[t(217)](100),await D[t(219)]("Initializing...\n\n",4);for(let e of rt){let n=e;typeof n===t(227)&&(n=await D.fetchModule(e).catch((e=>{const n=t;D[n(248)](n(230)+e[n(247)])}))),await D[t(236)](n)}async function n(n){const s=t;if(""!=n[0])if(z[n[0]]){lt=!1;const t=await z[n[0]](n[s(228)](1));0!==t&&null!=t&&D[s(248)]("\nProcess exited.\n"),e[s(231)](at),lt=!0}else D[s(248)]('\nCommand "'+n[0]+s(239))}D[t(248)](""),await D[t(223)](),D[t(248)](""),await D[t(217)](100),await D[t(248)](t(240),4),D[t(238)]((async()=>{const s=t;for(D.print(s(242)),D[s(248)](""),await D[s(217)](100);;){const t=(await e.read(at))[s(246)](" ");await n(t).catch((t=>{const e=s;console.error(t),D[e(248)](e(235)+t[e(247)]+"\n")}))}})),e[t(226)](t(229),(e=>{const n=t;"r"==e.key?location[n(221)]():"v"==e[n(245)]&&e[n(241)]()})),window.addEventListener("paste",(n=>{const s=t;n[s(225)][s(237)][0][s(233)]((t=>{e[s(222)](t)}))}))}),200)})();